(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{508:function(e,t,r){"use strict";r.r(t);r(8),r(7),r(6),r(12),r(13),r(10),r(9);var n=r(1),o=r(516),c=r(515);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}Object(c.d)("eager"),Object(c.c)("required",d(d({},o.c),{},{message:"{_field_} không được bỏ trống"})),Object(c.c)("max",d(d({},o.b),{},{message:"{_field_} không dài hơn {length} ký tự"})),Object(c.c)("email",d(d({},o.a),{},{message:"Địa chỉ email không hợp lệ"}));var v={components:{ValidationProvider:c.b,ValidationObserver:c.a},created:function(){this.$parent.$on("submitOrder",this.storeBuyerInfo)},data:function(){return{editing:!0,buyer:{name:"",phone:"",address:"",email:""}}},mounted:function(){this.$store.commit("buyer/load");var e=this.$store.state.buyer.defaultBuyer;this.buyer=JSON.parse(JSON.stringify(e))},methods:{validateAndSaveBuyerInfo:function(){var e=this;this.$refs.observer.validate().then((function(t){t&&e.$store.commit("buyer/storeBuyer",e.buyer)}))},getBuyerInfo:function(){return this.buyer},storeBuyerInfo:function(){this.$store.commit("buyer/storeBuyer",this.buyer)},validate:function(){return this.$refs.observer.validate()},clear:function(){this.buyer={},this.$refs.observer.reset()}}},f=r(27),h=r(30),y=r.n(h),m=r(203),O=r(51),_=r(451),component=Object(f.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"rounded-0"},[r("v-card-text",[r("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){t.validate,t.reset;return[r("form",[r("ValidationProvider",{attrs:{name:"Tên",rules:"required|max:150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("v-text-field",{attrs:{outlined:"",placeholder:"ví dụ: Nguyễn văn A",counter:150,"error-messages":n,label:"Tên",required:""},model:{value:e.buyer.name,callback:function(t){e.$set(e.buyer,"name",t)},expression:"buyer.name"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{name:"Số Điện Thoại",rules:"required|max:20"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("v-text-field",{attrs:{outlined:"",placeholder:"ví dụ: 0948338392","error-messages":n,label:"Số Điện Thoại",required:""},model:{value:e.buyer.phone,callback:function(t){e.$set(e.buyer,"phone",t)},expression:"buyer.phone"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{name:"email",rules:"email"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("v-text-field",{attrs:{outlined:"",placeholder:"ví dụ: tam@gmail.com","error-messages":n,label:"E-mail"},model:{value:e.buyer.email,callback:function(t){e.$set(e.buyer,"email",t)},expression:"buyer.email"}})]}}],null,!0)}),e._v(" "),r("ValidationProvider",{attrs:{name:"Địa chỉ giao hàng",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("v-text-field",{attrs:{outlined:"",placeholder:"ví dụ: 71/28B Đường Trường Chinh, Phường Văn Hải, Thành Phố Phan Ranh, Tỉnh Ninh Thuận","error-messages":n,label:"Địa chỉ giao hàng"},model:{value:e.buyer.address,callback:function(t){e.$set(e.buyer,"address",t)},expression:"buyer.address"}})]}}],null,!0)})],1)]}}])}),e._v(" "),e._t("extraField")],2)],1)}),[],!1,null,"a452c2ae",null);t.default=component.exports;y()(component,{VCard:m.a,VCardText:O.c,VTextField:_.a})},575:function(e,t,r){"use strict";r.r(t);r(8),r(7),r(6),r(12),r(13),r(10),r(9);var n=r(1),o=r(180),c=r(508),l=r(34),d=r(46),v=r(168),f="submitted",h="pending",y="asap",m=function(){function e(t,r){Object(l.a)(this,e),this.buyer=t,this.products=r,this.status=h,this.note=""}return Object(d.a)(e,[{key:"setStatus",value:function(e){return this.status=e,this}},{key:"setNote",value:function(e){return this.note=e,this}},{key:"data",value:function(){return{userAgent:navigator.userAgent,status:this.status,note:this.note,createAt:(new Date).toISOString(),type:y,clientId:this.clientId,buyer:this.buyer,products:this.products}}},{key:"clientId",get:function(){return v.a.getItem("clientId",Date.now())}}],[{key:"create",value:function(t,r){return new e(t,r)}}]),e}();function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var j={name:"dat-hang",components:{Buyer:c.default,Cart:o.default},data:function(){return{dialog:!1,note:""}},computed:{totalProduct:function(){return this.$store.state.cart.products.length}},methods:{submitOrder:function(){var e=this;this.$refs.buyer.validate().then((function(t){if(t){var r=e.$store.state.cart;e.$emit("submitOrder");var n=e.$refs.buyer.getBuyerInfo(),o=m.create(n,r.products);o.setStatus(f).setNote(e.note),e.$fireStore.collection("orders").add(o.data()).then((function(t){e.$store.commit("cart/moveToMyOrders",_(_({},o.data()),{},{fireBaseRefId:t.id})),e.$store.commit("cart/reset"),e.$router.push("/orders/".concat(t.id))}))}}))}}},x=r(27),k=r(30),P=r.n(k),w=r(128),V=r(203),$=r(51),C=r(482),S=r(474),T=r(468),B=r(456),I=r(130),D=r(483),E=r(464),A=r(565),component=Object(x.a)(j,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-btn",{staticClass:"rounded-0 pl-0",attrs:{color:"primary",elevation:"0",ripple:!1,text:""}},[r("v-icon",[e._v("mdi-cart-plus")]),e._v("\n    Giỏ Hàng Của Bạn\n  ")],1),e._v(" "),r("t3-line",{attrs:{value:0}}),e._v(" "),r("v-row",[r("v-col",{staticClass:"col-lg-6"},[r("cart",[r("template",{slot:"action"},[r("span")])],2)],1)],1),e._v(" "),e.totalProduct>0?r("v-row",[r("v-col",{staticClass:"col-lg-6"},[r("v-btn",{staticClass:"rounded-0 pl-0",attrs:{color:"secondary",elevation:"0",ripple:!1,text:""}},[r("v-icon",[e._v("mdi-information-outline")]),e._v("\n        Thông tin giao hàng\n      ")],1),e._v(" "),r("t3-line",{attrs:{value:0,color:"secondary"}}),e._v(" "),r("buyer",{ref:"buyer"},[r("template",{slot:"extraField"},[r("v-textarea",{attrs:{label:"Ghi chú"},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}})],1)],2),e._v(" "),r("v-card",{staticClass:"mt-5",attrs:{flat:""}},[r("v-card-actions",{staticClass:"pr-0"},[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"secondary"},on:{click:e.submitOrder}},[e._v("Mua Hàng")])],1)],1)],1)],1):e._e(),e._v(" "),r("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("\n        Đặt hàng thành công rồi!\n      ")]),e._v(" "),r("v-card-text",[e._v("\n        Đơn hàng đã được ghi nhận thành công, chúng tôi sẽ liên hệ sớm với bạn trong vài phút tới.\n      ")]),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n          OK\n        ")])],1)],1)],1)],1)}),[],!1,null,"6e1ad72a",null);t.default=component.exports;P()(component,{Cart:r(180).default,Buyer:r(508).default}),P()(component,{VBtn:w.a,VCard:V.a,VCardActions:$.a,VCardText:$.c,VCardTitle:$.d,VCol:C.a,VContainer:S.a,VDialog:T.a,VDivider:B.a,VIcon:I.a,VRow:D.a,VSpacer:E.a,VTextarea:A.a})}}]);