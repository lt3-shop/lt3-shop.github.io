/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{542:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(180),o=n(305),c=n(312),h=n(226),i=n(543),f=n(307);var u=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(o),a={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},l=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return r.__extends(e,t),e}(Error),d=new c.Logger("@firebase/firestore");function v(){return d.logLevel}function y(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(d.logLevel<=c.LogLevel.DEBUG){var n=e.map(w);d.debug.apply(d,r.__spreadArrays(["Firestore (7.21.0): "+t],n))}}function p(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(d.logLevel<=c.LogLevel.ERROR){var n=e.map(w);d.error.apply(d,r.__spreadArrays(["Firestore (7.21.0): "+t],n))}}function m(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(d.logLevel<=c.LogLevel.WARN){var n=e.map(w);d.warn.apply(d,r.__spreadArrays(["Firestore (7.21.0): "+t],n))}}function w(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function E(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.21.0) INTERNAL ASSERTION FAILED: "+t;throw p(e),new Error(e)}function g(t,e){t||E()}function _(t,e){return t}function I(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function b(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function T(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var A=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&E(),void 0===n?n=t.length-e:n>t.length-e&&E(),this.segments=t,this.offset=e,this.t=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.i(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.o(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.u=function(t){return t=void 0===t?1:t,this.o(this.segments,this.offset+t,this.length-t)},t.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},t.prototype.l=function(){return this.segments[this.offset]},t.prototype._=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.m=function(){return 0===this.length},t.prototype.T=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.I=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},t.i=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.prototype.R=function(){return this.A().join("/")},e.prototype.toString=function(){return this.R()},e.P=function(t){if(t.indexOf("//")>=0)throw new l(a.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.p=function(){return new e([])},e}(A),L=/^[_a-zA-Z][_a-zA-Z0-9]*$/,k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.g=function(t){return L.test(t)},e.prototype.R=function(){return this.A().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.g(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.R()},e.prototype.V=function(){return 1===this.length&&"__name__"===this.get(0)},e.v=function(){return new e(["__name__"])},e.S=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new l(a.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new l(a.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var c=t[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new l(a.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new l(a.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.p=function(){return new e([])},e}(A),S=function(){function t(t){this.path=t}return t.C=function(e){return new t(N.P(e))},t.D=function(e){return new t(N.P(e).u(5))},t.prototype.F=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===N.i(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.i=function(t,e){return N.i(t.path,e.path)},t.N=function(t){return t.length%2==0},t.$=function(e){return new t(new N(e.slice()))},t}();function R(t,e){if(0!==e.length)throw new l(a.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+H(e.length,"argument")+".")}function D(t,e,n){if(e.length!==n)throw new l(a.INVALID_ARGUMENT,"Function "+t+"() requires "+H(n,"argument")+", but was called with "+H(e.length,"argument")+".")}function P(t,e,n){if(e.length<n)throw new l(a.INVALID_ARGUMENT,"Function "+t+"() requires at least "+H(n,"argument")+", but was called with "+H(e.length,"argument")+".")}function O(t,e,n,r){if(e.length<n||e.length>r)throw new l(a.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+H(e.length,"argument")+".")}function V(t,e,n,r){j(t,e,K(n)+" argument",r)}function C(t,e,n,r){void 0!==r&&V(t,e,n,r)}function U(t,e,n,r){j(t,e,n+" option",r)}function M(t,e,n,r){void 0!==r&&U(t,e,n,r)}function x(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,u=i;s<u.length;s++){var c=u[s];if(c===r)return;o.push(q(c))}var h=q(r);throw new l(a.INVALID_ARGUMENT,"Invalid value "+h+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function G(t,e,n,r){if(!e.some((function(t){return t===r})))throw new l(a.INVALID_ARGUMENT,"Invalid value "+q(r)+" provided to function "+t+"() for its "+K(n)+" argument. Acceptable values: "+e.join(", "));return r}function j(t,e,n,r){if(!("object"===e?F(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=q(r);throw new l(a.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function F(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function q(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":E()}function B(t,e,n){if(void 0===n)throw new l(a.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+K(e)+" argument, but it was undefined.")}function Q(t,e,n){b(e,(function(e,r){if(n.indexOf(e)<0)throw new l(a.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function z(t,e,n,r){var i=q(r);return new l(a.INVALID_ARGUMENT,"Function "+t+"() requires its "+K(n)+" argument to be a "+e+", but it was: "+i)}function W(t,e,n){if(n<=0)throw new l(a.INVALID_ARGUMENT,"Function "+t+"() requires its "+K(e)+" argument to be a positive number, but it was: "+n+".")}function K(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function H(t,e){return t+" "+e+(1===t?"":"s")}function X(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Y=function(){function t(){}return t.k=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=X(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function J(t,e){return t<e?-1:t>e?1:0}function Z(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}var $=function(){function t(t){this.O=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.O,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.O)},t.prototype.M=function(){return 2*this.O.length},t.prototype.L=function(t){return J(this.O,t.O)},t.prototype.isEqual=function(t){return this.O===t.O},t}();$.q=new $("");var tt=function(){function t(t){this.U=t}return t.fromBase64String=function(e){try{return new t($.fromBase64String(e))}catch(e){throw new l(a.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t($.fromUint8Array(e))},t.prototype.toBase64=function(){return this.U.toBase64()},t.prototype.toUint8Array=function(){return this.U.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.U.isEqual(t.U)},t}();function et(){if("undefined"==typeof Uint8Array)throw new l(a.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function nt(){if("undefined"==typeof atob)throw new l(a.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.fromBase64String=function(t){D("Blob.fromBase64String",arguments,1),V("Blob.fromBase64String","string",1,t),nt();try{return new e($.fromBase64String(t))}catch(t){throw new l(a.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(D("Blob.fromUint8Array",arguments,1),et(),!(t instanceof Uint8Array))throw z("Blob.fromUint8Array","Uint8Array",1,t);return new e($.fromUint8Array(t))},e.prototype.toBase64=function(){return D("Blob.toBase64",arguments,0),nt(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return D("Blob.toUint8Array",arguments,0),et(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(tt),ot=function(t,e,n,r,i){this.B=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},st=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"j",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.L=function(t){return J(this.projectId,t.projectId)||J(this.database,t.database)},t}(),rt=function(){function t(t,e){this.W=t,this.G=e,this.K={}}return t.prototype.get=function(t){var e=this.W(t),n=this.K[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.G(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.W(t),r=this.K[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.G(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.K[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.W(t),n=this.K[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.G(n[r][0],t))return 1===n.length?delete this.K[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){b(this.K,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.m=function(){return T(this.K)},t}(),ut=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new l(a.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new l(a.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new l(a.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new l(a.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.H=function(t){return this.seconds===t.seconds?J(this.nanoseconds,t.nanoseconds):J(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),at=function(){function t(t){this.timestamp=t}return t.Y=function(e){return new t(e)},t.min=function(){return new t(new ut(0,0))},t.prototype.L=function(t){return this.timestamp.H(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.J=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.X=function(){return this.timestamp},t}();function ct(t){return null==t}function ht(t){return-0===t&&1/t==-1/0}var ft=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Z=null};function lt(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ft(t,e,n,r,i,o,s)}function pt(t){var e=_(t);if(null===e.Z){var n=e.path.R();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.R()+t.op.toString()+re(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.R()+e.dir;var e})).join(","),ct(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Yn(e.startAt)),e.endAt&&(n+="|ub:",n+=Yn(e.endAt)),e.Z=n}return e.Z}function vt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!nr(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!$t(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Zn(t.startAt,e.startAt)&&Zn(t.endAt,e.endAt)}function yt(t){return S.N(t.path)&&null===t.collectionGroup&&0===t.filters.length}var gt,dt,mt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=at.min()),void 0===o&&(o=at.min()),void 0===s&&(s=$.q),this.target=t,this.targetId=e,this.tt=n,this.sequenceNumber=r,this.et=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.nt=function(e){return new t(this.target,this.targetId,this.tt,e,this.et,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.st=function(e,n){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.it=function(e){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,this.et,e,this.resumeToken)},t}(),wt=function(t){this.count=t};function bt(t){switch(t){case a.OK:return E();case a.CANCELLED:case a.UNKNOWN:case a.DEADLINE_EXCEEDED:case a.RESOURCE_EXHAUSTED:case a.INTERNAL:case a.UNAVAILABLE:case a.UNAUTHENTICATED:return!1;case a.INVALID_ARGUMENT:case a.NOT_FOUND:case a.ALREADY_EXISTS:case a.PERMISSION_DENIED:case a.FAILED_PRECONDITION:case a.ABORTED:case a.OUT_OF_RANGE:case a.UNIMPLEMENTED:case a.DATA_LOSS:return!0;default:return E()}}function Et(t){if(void 0===t)return p("GRPC error has no .code"),a.UNKNOWN;switch(t){case gt.OK:return a.OK;case gt.CANCELLED:return a.CANCELLED;case gt.UNKNOWN:return a.UNKNOWN;case gt.DEADLINE_EXCEEDED:return a.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return a.RESOURCE_EXHAUSTED;case gt.INTERNAL:return a.INTERNAL;case gt.UNAVAILABLE:return a.UNAVAILABLE;case gt.UNAUTHENTICATED:return a.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return a.INVALID_ARGUMENT;case gt.NOT_FOUND:return a.NOT_FOUND;case gt.ALREADY_EXISTS:return a.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return a.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return a.FAILED_PRECONDITION;case gt.ABORTED:return a.ABORTED;case gt.OUT_OF_RANGE:return a.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return a.UNIMPLEMENTED;case gt.DATA_LOSS:return a.DATA_LOSS;default:return E()}}(dt=gt||(gt={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";var _t=function(){function t(t,e){this.i=t,this.root=e||Tt.EMPTY}return t.prototype.rt=function(e,n){return new t(this.i,this.root.rt(e,n,this.i).copy(null,null,Tt.ot,null,null))},t.prototype.remove=function(e){return new t(this.i,this.root.remove(e,this.i).copy(null,null,Tt.ot,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.m();){var n=this.i(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.m();){var r=this.i(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.m=function(){return this.root.m()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ut=function(){return this.root.ut()},t.prototype.ct=function(){return this.root.ct()},t.prototype.at=function(t){return this.root.at(t)},t.prototype.forEach=function(t){this.at((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.at((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.lt=function(){return new It(this.root,null,this.i,!1)},t.prototype._t=function(t){return new It(this.root,t,this.i,!1)},t.prototype.ft=function(){return new It(this.root,null,this.i,!0)},t.prototype.dt=function(t){return new It(this.root,t,this.i,!0)},t}(),It=function(){function t(t,e,n,r){this.wt=r,this.Tt=[];for(var i=1;!t.m();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.wt?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.wt?t.right:t.left}}return t.prototype.Et=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.wt)for(t=t.left;!t.m();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.m();)this.Tt.push(t),t=t.left;return e},t.prototype.It=function(){return this.Tt.length>0},t.prototype.At=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),Tt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.m=function(){return!1},t.prototype.at=function(t){return this.left.at(t)||t(this.key,this.value)||this.right.at(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left.m()?this:this.left.min()},t.prototype.ut=function(){return this.min().key},t.prototype.ct=function(){return this.right.m()?this.key:this.right.ct()},t.prototype.rt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.rt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.rt(t,e,n))).Rt()},t.prototype.yt=function(){if(this.left.m())return t.EMPTY;var e=this;return e.left.Pt()||e.left.left.Pt()||(e=e.gt()),(e=e.copy(null,null,null,e.left.yt(),null)).Rt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.m()||i.left.Pt()||i.left.left.Pt()||(i=i.gt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Pt()&&(i=i.Vt()),i.right.m()||i.right.Pt()||i.right.left.Pt()||(i=i.vt()),0===n(e,i.key)){if(i.right.m())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.yt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Rt()},t.prototype.Pt=function(){return this.color},t.prototype.Rt=function(){var t=this;return t.right.Pt()&&!t.left.Pt()&&(t=t.bt()),t.left.Pt()&&t.left.left.Pt()&&(t=t.Vt()),t.left.Pt()&&t.right.Pt()&&(t=t.St()),t},t.prototype.gt=function(){var t=this.St();return t.right.left.Pt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Vt())).bt()).St()),t},t.prototype.vt=function(){var t=this.St();return t.left.left.Pt()&&(t=(t=t.Vt()).St()),t},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Vt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.St=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Dt();return Math.pow(2,t)<=this.size+1},t.prototype.Dt=function(){if(this.Pt()&&this.left.Pt())throw E();if(this.right.Pt())throw E();var t=this.left.Dt();if(t!==this.right.Dt())throw E();return t+(this.Pt()?0:1)},t}();Tt.EMPTY=null,Tt.RED=!0,Tt.ot=!1,Tt.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw E()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw E()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw E()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw E()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw E()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.rt=function(t,e,n){return new Tt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.m=function(){return!0},t.prototype.at=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.ut=function(){return null},t.prototype.ct=function(){return null},t.prototype.Pt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Dt=function(){return 0},t}());var At=function(){function t(t){this.i=t,this.data=new _t(this.i)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ut()},t.prototype.last=function(){return this.data.ct()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.at((function(e,n){return t(e),!1}))},t.prototype.Ft=function(t,e){for(var n=this.data._t(t[0]);n.It();){var r=n.Et();if(this.i(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Nt=function(t,e){var n;for(n=void 0!==e?this.data._t(e):this.data.lt();n.It();)if(!t(n.Et().key))return},t.prototype.$t=function(t){var e=this.data._t(t);return e.It()?e.Et().key:null},t.prototype.lt=function(){return new Nt(this.data.lt())},t.prototype._t=function(t){return new Nt(this.data._t(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).rt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.m=function(){return this.data.m()},t.prototype.xt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.lt(),r=e.data.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(0!==this.i(i,o))return!1}return!0},t.prototype.A=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.i);return n.data=e,n},t}(),Nt=function(){function t(t){this.kt=t}return t.prototype.Et=function(){return this.kt.Et().key},t.prototype.It=function(){return this.kt.It()},t}(),Lt=new _t(S.i);function kt(){return Lt}function St(){return kt()}var Rt=new _t(S.i);function Dt(){return Rt}var Pt=new _t(S.i),Ot=new At(S.i);function Vt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ot,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ct=new At(J);function Ut(){return Ct}var Mt=function(){function t(t){this.i=t?function(e,n){return t(e,n)||S.i(e.key,n.key)}:function(t,e){return S.i(t.key,e.key)},this.Ot=Dt(),this.Mt=new _t(this.i)}return t.Lt=function(e){return new t(e.i)},t.prototype.has=function(t){return null!=this.Ot.get(t)},t.prototype.get=function(t){return this.Ot.get(t)},t.prototype.first=function(){return this.Mt.ut()},t.prototype.last=function(){return this.Mt.ct()},t.prototype.m=function(){return this.Mt.m()},t.prototype.indexOf=function(t){var e=this.Ot.get(t);return e?this.Mt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Mt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Mt.at((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ot.rt(t.key,t),e.Mt.rt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ot.remove(t),this.Mt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Mt.lt(),r=e.Mt.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.i=this.i,r.Ot=e,r.Mt=n,r},t}(),xt=function(){function t(){this.qt=new _t(S.i)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.rt(e,t):3===t.type&&1!==n.type?this.qt=this.qt.rt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.rt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.rt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.rt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.rt(e,{type:2,doc:t.doc}):E():this.qt=this.qt.rt(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.at((function(e,n){t.push(n)})),t},t}(),Gt=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Bt=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.jt=s,this.Wt=u}return t.Gt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Mt.Lt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.m()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.jt===t.jt&&this.Qt.isEqual(t.Qt)&&Cn(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Bt.isEqual(t.Bt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),jt=function(){function t(t,e,n,r,i){this.et=t,this.zt=e,this.Kt=n,this.Ht=r,this.Yt=i}return t.Jt=function(e,n){var r=new Map;return r.set(e,Ft.Xt(e,n)),new t(at.min(),r,Ut(),kt(),Vt())},t}(),Ft=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Zt=e,this.te=n,this.ee=r,this.ne=i}return t.Xt=function(e,n){return new t($.q,n,Vt(),Vt(),Vt())},t}(),qt=function(t,e,n,r){this.se=t,this.removedTargetIds=e,this.key=n,this.ie=r},Bt=function(t,e){this.targetId=t,this.re=e},Qt=function(t,e,n,r){void 0===n&&(n=$.q),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},zt=function(){function t(){this.oe=0,this.ue=Ht(),this.ce=$.q,this.ae=!1,this.he=!0}return Object.defineProperty(t.prototype,"Zt",{get:function(){return this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"le",{get:function(){return 0!==this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return this.he},enumerable:!1,configurable:!0}),t.prototype.fe=function(t){t.M()>0&&(this.he=!0,this.ce=t)},t.prototype.de=function(){var t=Vt(),e=Vt(),n=Vt();return this.ue.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:E()}})),new Ft(this.ce,this.ae,t,e,n)},t.prototype.we=function(){this.he=!1,this.ue=Ht()},t.prototype.me=function(t,e){this.he=!0,this.ue=this.ue.rt(t,e)},t.prototype.Te=function(t){this.he=!0,this.ue=this.ue.remove(t)},t.prototype.Ee=function(){this.oe+=1},t.prototype.Ie=function(){this.oe-=1},t.prototype.Ae=function(){this.he=!0,this.ae=!0},t}(),Wt=function(){function t(t){this.Re=t,this.ye=new Map,this.Pe=kt(),this.pe=Kt(),this.ge=new At(J)}return t.prototype.Ve=function(t){for(var e=0,n=t.se;e<n.length;e++){var r=n[e];t.ie instanceof bn?this.ve(r,t.ie):t.ie instanceof En&&this.be(r,t.key,t.ie)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.be(s,t.key,t.ie)}},t.prototype.Se=function(t){var e=this;this.Ce(t,(function(n){var r=e.De(n);switch(t.state){case 0:e.Fe(n)&&r.fe(t.resumeToken);break;case 1:r.Ie(),r.le||r.we(),r.fe(t.resumeToken);break;case 2:r.Ie(),r.le||e.removeTarget(n);break;case 3:e.Fe(n)&&(r.Ae(),r.fe(t.resumeToken));break;case 4:e.Fe(n)&&(e.Ne(n),r.fe(t.resumeToken));break;default:E()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ye.forEach((function(t,r){n.Fe(r)&&e(r)}))},t.prototype.$e=function(t){var e=t.targetId,n=t.re.count,r=this.xe(e);if(r){var i=r.target;if(yt(i))if(0===n){var o=new S(i.path);this.be(e,o,new En(o,at.min()))}else g(1===n);else this.ke(e)!==n&&(this.Ne(e),this.ge=this.ge.add(e))}},t.prototype.Oe=function(t){var e=this,n=new Map;this.ye.forEach((function(r,i){var o=e.xe(i);if(o){if(r.Zt&&yt(o.target)){var s=new S(o.target.path);null!==e.Pe.get(s)||e.Me(i,s)||e.be(i,s,new En(s,t))}r._e&&(n.set(i,r.de()),r.we())}}));var r=Vt();this.pe.forEach((function(t,n){var i=!0;n.Nt((function(t){var n=e.xe(t);return!n||2===n.tt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new jt(t,n,this.ge,this.Pe,r);return this.Pe=kt(),this.pe=Kt(),this.ge=new At(J),i},t.prototype.ve=function(t,e){if(this.Fe(t)){var n=this.Me(t,e.key)?2:0;this.De(t).me(e.key,n),this.Pe=this.Pe.rt(e.key,e),this.pe=this.pe.rt(e.key,this.Le(e.key).add(t))}},t.prototype.be=function(t,e,n){if(this.Fe(t)){var r=this.De(t);this.Me(t,e)?r.me(e,1):r.Te(e),this.pe=this.pe.rt(e,this.Le(e).delete(t)),n&&(this.Pe=this.Pe.rt(e,n))}},t.prototype.removeTarget=function(t){this.ye.delete(t)},t.prototype.ke=function(t){var e=this.De(t).de();return this.Re.qe(t).size+e.te.size-e.ne.size},t.prototype.Ee=function(t){this.De(t).Ee()},t.prototype.De=function(t){var e=this.ye.get(t);return e||(e=new zt,this.ye.set(t,e)),e},t.prototype.Le=function(t){var e=this.pe.get(t);return e||(e=new At(J),this.pe=this.pe.rt(t,e)),e},t.prototype.Fe=function(t){var e=null!==this.xe(t);return e||y("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.xe=function(t){var e=this.ye.get(t);return e&&e.le?null:this.Re.Ue(t)},t.prototype.Ne=function(t){var e=this;this.ye.set(t,new zt),this.Re.qe(t).forEach((function(n){e.be(t,n,null)}))},t.prototype.Me=function(t,e){return this.Re.qe(t).has(e)},t}();function Kt(){return new _t(S.i)}function Ht(){return new _t(S.i)}function Xt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yt(t){var e=ie(t.mapValue.fields.__local_write_time__.timestampValue);return new ut(e.seconds,e.nanos)}var Jt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xt(t)?4:10:E()}function $t(t,e){var n=Zt(t);if(n!==Zt(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yt(t).isEqual(Yt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ie(t.timestampValue),r=ie(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return se(t.bytesValue).isEqual(se(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return oe(t.geoPointValue.latitude)===oe(e.geoPointValue.latitude)&&oe(t.geoPointValue.longitude)===oe(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return oe(t.integerValue)===oe(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=oe(t.doubleValue),r=oe(e.doubleValue);return n===r?ht(n)===ht(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Z(t.arrayValue.values||[],e.arrayValue.values||[],$t);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(I(n)!==I(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!$t(n[i],r[i])))return!1;return!0}(t,e);default:return E()}}function te(t,e){return void 0!==(t.values||[]).find((function(t){return $t(t,e)}))}function ee(t,e){var n=Zt(t),r=Zt(e);if(n!==r)return J(n,r);switch(n){case 0:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=oe(t.integerValue||t.doubleValue),r=oe(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ne(t.timestampValue,e.timestampValue);case 4:return ne(Yt(t),Yt(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(t,e){var n=se(t),r=se(e);return n.L(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=J(n[i],r[i]);if(0!==o)return o}return J(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=J(oe(t.latitude),oe(e.latitude));return 0!==n?n:J(oe(t.longitude),oe(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ee(n[i],r[i]);if(o)return o}return J(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=J(r[s],o[s]);if(0!==u)return u;var a=ee(n[r[s]],i[o[s]]);if(0!==a)return a}return J(r.length,o.length)}(t.mapValue,e.mapValue);default:throw E()}}function ne(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return J(t,e);var n=ie(t),r=ie(e),i=J(n.seconds,r.seconds);return 0!==i?i:J(n.nanos,r.nanos)}function re(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=ie(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?se(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,S.D(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=t(s)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):E();var n,r}(t)}function ie(t){if(g(!!t),"string"==typeof t){var e=0,n=Jt.exec(t);if(g(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:oe(t.seconds),nanos:oe(t.nanos)}}function oe(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function se(t){return"string"==typeof t?$.fromBase64String(t):$.fromUint8Array(t)}function ue(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.R()}}function ae(t){return!!t&&"integerValue"in t}function ce(t){return!!t&&"arrayValue"in t}function he(t){return!!t&&"nullValue"in t}function fe(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function le(t){return!!t&&"mapValue"in t}var pe={asc:"ASCENDING",desc:"DESCENDING"},de={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ve=function(t,e){this.B=t,this.Be=e};function ye(t){return{integerValue:""+t}}function ge(t,e){if(t.Be){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ht(e)?"-0":e}}function me(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!ht(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?ye(e):ge(t,e)}function we(t,e){return t.Be?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function be(t,e){return t.Be?e.toBase64():e.toUint8Array()}function Ee(t,e){return we(t,e.X())}function _e(t){return g(!!t),at.Y(function(t){var e=ie(t);return new ut(e.seconds,e.nanos)}(t))}function Ie(t,e){return function(t){return new N(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).R()}function Te(t,e){return Ie(t.B,e.path)}function Ae(t,e){var n,r=function(t){var e=N.P(t);return g(Me(e)),e}(e);return g(r.get(1)===t.B.projectId),g(!r.get(3)&&!t.B.database||r.get(3)===t.B.database),new S((g((n=r).length>4&&"documents"===n.get(4)),n.u(5)))}function Ne(t,e){return Ie(t.B,e)}function Le(t){return new N(["projects",t.B.projectId,"databases",t.B.database]).R()}function ke(t,e,n){return{name:Te(t,e),fields:n.proto.mapValue.fields}}function Se(t,e){var n;if(e instanceof an)n={update:ke(t,e.key,e.value)};else if(e instanceof dn)n={delete:Te(t,e.key)};else if(e instanceof cn)n={update:ke(t,e.key,e.data),updateMask:Ue(e.Qe)};else if(e instanceof fn)n={transform:{document:Te(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof qe)return{fieldPath:e.field.R(),setToServerValue:"REQUEST_TIME"};if(n instanceof Be)return{fieldPath:e.field.R(),appendMissingElements:{values:n.elements}};if(n instanceof ze)return{fieldPath:e.field.R(),removeAllFromArray:{values:n.elements}};if(n instanceof Ke)return{fieldPath:e.field.R(),increment:n.je};throw E()}(0,t)}))}};else{if(!(e instanceof vn))return E();n={verify:Te(t,e.key)}}return e.Ge.We||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ee(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:E()}(t,e.Ge)),n}function Re(t,e){return{documents:[Ne(t,e.path)]}}function De(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ne(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ne(t,r.h()),n.structuredQuery.from=[{collectionId:r._()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(fe(t.value))return{unaryFilter:{field:Ce(t.field),op:"IS_NAN"}};if(he(t.value))return{unaryFilter:{field:Ce(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(fe(t.value))return{unaryFilter:{field:Ce(t.field),op:"IS_NOT_NAN"}};if(he(t.value))return{unaryFilter:{field:Ce(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ce(t.field),op:Ve(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Ce(t.field),direction:Oe(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Be||ct(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Pe(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Pe(e.endAt)),n}function Pe(t){return{before:t.before,values:t.position}}function Oe(t){return pe[t]}function Ve(t){return de[t]}function Ce(t){return{fieldPath:t.R()}}function Ue(t){var e=[];return t.fields.forEach((function(t){return e.push(t.R())})),{fieldPaths:e}}function Me(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var xe=function(){this.ze=void 0};function Ge(t,e,n){return t instanceof qe?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Be?Qe(t,e):t instanceof ze?We(t,e):function(t,e){var n=Fe(t,e),r=He(n)+He(t.je);return ae(n)&&ae(t.je)?ye(r):ge(t.serializer,r)}(t,e)}function je(t,e,n){return t instanceof Be?Qe(t,e):t instanceof ze?We(t,e):n}function Fe(t,e){return t instanceof Ke?ae(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var qe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e}(xe),Be=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return r.__extends(e,t),e}(xe);function Qe(t,e){for(var n=Xe(e),r=function(t){n.some((function(e){return $t(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ze=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return r.__extends(e,t),e}(xe);function We(t,e){for(var n=Xe(e),r=function(t){n=n.filter((function(e){return!$t(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ke=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.je=n,r}return r.__extends(e,t),e}(xe);function He(t){return oe(t.integerValue||t.doubleValue)}function Xe(t){return ce(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ye=function(){function t(t){this.fields=t,t.sort(k.i)}return t.prototype.Ke=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].T(t))return!0;return!1},t.prototype.isEqual=function(t){return Z(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Je=function(t,e){this.field=t,this.transform=e},Ze=function(t,e){this.version=t,this.transformResults=e},$e=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.He=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"We",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function tn(t,e){return void 0!==t.updateTime?e instanceof bn&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof bn}var en=function(){};function nn(t,e,n){return t instanceof an?function(t,e,n){return new bn(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof cn?function(t,e,n){if(!tn(t.Ge,e))return new _n(t.key,n.version);var r=hn(t,e);return new bn(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof fn?function(t,e,n){if(g(null!=n.transformResults),!tn(t.Ge,e))return new _n(t.key,n.version);var r=ln(t,e),i=function(t,e,n){var r=[];g(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof bn&&(u=e.field(o.field)),r.push(je(s,u,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=pn(t,r.data(),i);return new bn(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new En(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function rn(t,e,n,r){return t instanceof an?function(t,e){if(!tn(t.Ge,e))return e;var n=un(e);return new bn(t.key,n,t.value,{Ye:!0})}(t,e):t instanceof cn?function(t,e){if(!tn(t.Ge,e))return e;var n=un(e),r=hn(t,e);return new bn(t.key,n,r,{Ye:!0})}(t,e):t instanceof fn?function(t,e,n,r){if(!tn(t.Ge,e))return e;var i=ln(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof bn&&(c=n.field(u.field)),null===c&&r instanceof bn&&(c=r.field(u.field)),i.push(Ge(a,c,e))}return i}(t.fieldTransforms,n,e,r),s=pn(t,i.data(),o);return new bn(t.key,i.version,s,{Ye:!0})}(t,e,r,n):function(t,e){return tn(t.Ge,e)?new En(t.key,at.min()):e}(t,e)}function on(t,e){return t instanceof fn?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof bn?e.field(o.field):void 0,u=Fe(o.transform,s||null);null!=u&&(n=null==n?(new gn).set(o.field,u):n.set(o.field,u))}return n?n.Je():null}(t,e):null}function sn(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||Z(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Be&&e instanceof Be||t instanceof ze&&e instanceof ze?Z(t.elements,e.elements,$t):t instanceof Ke&&e instanceof Ke?$t(t.je,e.je):t instanceof qe&&e instanceof qe}(t.transform,e.transform)}(t,e)})))}function un(t){return t instanceof bn?t.version:at.min()}var an=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ge=r,i.type=0,i}return r.__extends(e,t),e}(en),cn=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.Ge=i,o.type=1,o}return r.__extends(e,t),e}(en);function hn(t,e){return function(t,e){var n=new gn(e);return t.Qe.fields.forEach((function(e){if(!e.m()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Je()}(t,e instanceof bn?e.data():yn.empty())}var fn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ge=$e.exists(!0),r}return r.__extends(e,t),e}(en);function ln(t,e){return e}function pn(t,e,n){for(var r=new gn(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Je()}var dn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=3,r}return r.__extends(e,t),e}(en),vn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=4,r}return r.__extends(e,t),e}(en),yn=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.m())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!le(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t._()])||null},t.prototype.isEqual=function(t){return $t(this.proto,t.proto)},t}(),gn=function(){function t(t){void 0===t&&(t=yn.empty()),this.Xe=t,this.Ze=new Map}return t.prototype.set=function(t,e){return this.tn(t,e),this},t.prototype.delete=function(t){return this.tn(t,null),this},t.prototype.tn=function(t,e){for(var n=this.Ze,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Zt(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t._(),e)},t.prototype.Je=function(){var t=this.en(k.p(),this.Ze);return null!=t?new yn(t):this.Xe},t.prototype.en=function(t,e){var n=this,r=!1,i=this.Xe.field(t),o=le(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.en(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function mn(t){var e=[];return b(t.fields||{},(function(t,n){var r=new k([t]);if(le(n)){var i=mn(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new Ye(e)}var wn=function(t,e){this.key=t,this.version=e},bn=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).nn=r,o.Ye=!!i.Ye,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return r.__extends(e,t),e.prototype.field=function(t){return this.nn.field(t)},e.prototype.data=function(){return this.nn},e.prototype.sn=function(){return this.nn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ye===t.Ye&&this.hasCommittedMutations===t.hasCommittedMutations&&this.nn.isEqual(t.nn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.nn.toString()+", {hasLocalMutations: "+this.Ye+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ye||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(wn),En=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return r.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(wn),_n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(wn),In=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.rn=n,this.filters=r,this.limit=i,this.on=o,this.startAt=s,this.endAt=u,this.un=null,this.cn=null,this.startAt,this.endAt};function Tn(t){return new In(t)}function An(t){return!ct(t.limit)&&"F"===t.on}function Nn(t){return!ct(t.limit)&&"L"===t.on}function Ln(t){return t.rn.length>0?t.rn[0].field:null}function kn(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.an())return r.field}return null}function Sn(t){return null!==t.collectionGroup}function Rn(t){var e=_(t);if(null===e.un){e.un=[];var n=kn(e),r=Ln(e);if(null!==n&&null===r)n.V()||e.un.push(new $n(n)),e.un.push(new $n(k.v(),"asc"));else{for(var i=!1,o=0,s=e.rn;o<s.length;o++){var u=s[o];e.un.push(u),u.field.V()&&(i=!0)}if(!i){var a=e.rn.length>0?e.rn[e.rn.length-1].dir:"asc";e.un.push(new $n(k.v(),a))}}}return e.un}function Dn(t){var e=_(t);if(!e.cn)if("F"===e.on)e.cn=lt(e.path,e.collectionGroup,Rn(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Rn(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new $n(o.field,s))}var u=e.endAt?new Xn(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Xn(e.startAt.position,!e.startAt.before):null;e.cn=lt(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.cn}function Pn(t,e,n){return new In(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function On(t,e){return new In(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.on,e,t.endAt)}function Vn(t,e){return new In(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.on,t.startAt,e)}function Cn(t,e){return vt(Dn(t),Dn(e))&&t.on===e.on}function Un(t){return pt(Dn(t))+"|lt:"+t.on}function Mn(t){return"Query(target="+function(t){var e=t.path.R();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.R()+" "+e.op+" "+re(e.value);var e})).join(", ")+"]"),ct(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.R()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Yn(t.startAt)),t.endAt&&(e+=", endAt: "+Yn(t.endAt)),"Target("+e+")"}(Dn(t))+"; limitType="+t.on+")"}function xn(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.F(t.collectionGroup)&&t.path.T(n):S.N(t.path)?t.path.isEqual(n):t.path.I(n)}(t,e)&&function(t,e){for(var n=0,r=t.rn;n<r.length;n++){var i=r[n];if(!i.field.V()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Jn(t.startAt,Rn(t),e)||t.endAt&&Jn(t.endAt,Rn(t),e))}(t,e)}function Gn(t){return function(e,n){for(var r=!1,i=0,o=Rn(t);i<o.length;i++){var s=o[i],u=er(s,e,n);if(0!==u)return u;r=r||s.field.V()}return 0}}var jn=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return r.__extends(e,t),e.create=function(t,n,r){if(t.V())return"in"===n||"not-in"===n?this.hn(t,n,r):new Fn(t,n,r);if(he(r)){if("=="!==n&&"!="!==n)throw new l(a.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new e(t,n,r)}if(fe(r)){if("=="!==n&&"!="!==n)throw new l(a.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new e(t,n,r)}return"array-contains"===n?new zn(t,r):"in"===n?new Wn(t,r):"not-in"===n?new Kn(t,r):"array-contains-any"===n?new Hn(t,r):new e(t,n,r)},e.hn=function(t,e,n){return"in"===e?new qn(t,n):new Bn(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.ln(ee(e,this.value)):null!==e&&Zt(this.value)===Zt(e)&&this.ln(ee(e,this.value))},e.prototype.ln=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return E()}},e.prototype.an=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Fn=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=S.D(r.referenceValue),i}return r.__extends(e,t),e.prototype.matches=function(t){var e=S.i(t.key,this.key);return this.ln(e)},e}(jn),qn=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Qn("in",n),r}return r.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(jn),Bn=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Qn("not-in",n),r}return r.__extends(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(jn);function Qn(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return S.D(t.referenceValue)}))}var zn=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ce(e)&&te(e.arrayValue,this.value)},e}(jn),Wn=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&te(this.value.arrayValue,e)},e}(jn),Kn=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){if(te(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!te(this.value.arrayValue,e)},e}(jn),Hn=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ce(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return te(e.value.arrayValue,t)}))},e}(jn),Xn=function(t,e){this.position=t,this.before=e};function Yn(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return re(t)})).join(",")}function Jn(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.V()?S.i(S.D(s.referenceValue),n.key):ee(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Zn(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!$t(t.position[n],e.position[n]))return!1;return!0}var $n=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function er(t,e,n){var r=t.field.V()?S.i(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ee(r,i):E()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return E()}}function nr(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var rr=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},tr=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this._n=t,this.fn=e,this.dn=n,this.wn=r,this.mn=i,this.Tn=0,this.En=null,this.In=Date.now(),this.reset()}return t.prototype.reset=function(){this.Tn=0},t.prototype.An=function(){this.Tn=this.mn},t.prototype.Rn=function(t){var e=this;this.cancel();var n=Math.floor(this.Tn+this.yn()),r=Math.max(0,Date.now()-this.In),i=Math.max(0,n-r);i>0&&y("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Tn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.En=this._n.Pn(this.fn,i,(function(){return e.In=Date.now(),t()})),this.Tn*=this.wn,this.Tn<this.dn&&(this.Tn=this.dn),this.Tn>this.mn&&(this.Tn=this.mn)},t.prototype.pn=function(){null!==this.En&&(this.En.gn(),this.En=null)},t.prototype.cancel=function(){null!==this.En&&(this.En.cancel(),this.En=null)},t.prototype.yn=function(){return(Math.random()-.5)*this.Tn},t}(),ir=function(){function t(t){var e=this;this.Vn=null,this.vn=null,this.result=void 0,this.error=void 0,this.bn=!1,this.Sn=!1,t((function(t){e.bn=!0,e.result=t,e.Vn&&e.Vn(t)}),(function(t){e.bn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Sn&&E(),this.Sn=!0,this.bn?this.error?this.Cn(n,this.error):this.Dn(e,this.result):new t((function(t,i){r.Vn=function(n){r.Dn(e,n).next(t,i)},r.vn=function(e){r.Cn(n,e).next(t,i)}}))},t.prototype.Fn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Nn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Dn=function(e,n){return e?this.Nn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.Nn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.xn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}();function or(t){return"IndexedDbTransactionError"===t.name}function sr(){return"undefined"!=typeof document?document:null}var ur=function(){function t(t,e,n,r,i){this.kn=t,this.fn=e,this.On=n,this.op=r,this.Mn=i,this.Ln=new rr,this.then=this.Ln.promise.then.bind(this.Ln.promise),this.Ln.promise.catch((function(t){}))}return t.qn=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Un=setTimeout((function(){return e.Bn()}),t)},t.prototype.gn=function(){return this.Bn()},t.prototype.cancel=function(t){null!==this.Un&&(this.clearTimeout(),this.Ln.reject(new l(a.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Bn=function(){var t=this;this.kn.Qn((function(){return null!==t.Un?(t.clearTimeout(),t.op().then((function(e){return t.Ln.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Un&&(this.Mn(this),clearTimeout(this.Un),this.Un=null)},t}(),ar=function(){function t(){var t=this;this.jn=Promise.resolve(),this.Wn=[],this.Gn=!1,this.zn=[],this.Kn=null,this.Hn=!1,this.Yn=[],this.Jn=new tr(this,"async_queue_retry"),this.Xn=function(){var e=sr();e&&y("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.Jn.pn()};var e=sr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xn)}return Object.defineProperty(t.prototype,"Zn",{get:function(){return this.Gn},enumerable:!1,configurable:!0}),t.prototype.Qn=function(t){this.enqueue(t)},t.prototype.ts=function(t){this.es(),this.ns(t)},t.prototype.ss=function(){if(!this.Gn){this.Gn=!0;var t=sr();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xn)}},t.prototype.enqueue=function(t){return this.es(),this.Gn?new Promise((function(t){})):this.ns(t)},t.prototype.rs=function(t){var e=this;this.Wn.push(t),this.Qn((function(){return e.os()}))},t.prototype.os=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(0===this.Wn.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Wn[0]()];case 2:return n.sent(),this.Wn.shift(),this.Jn.reset(),[3,4];case 3:if(!or(t=n.sent()))throw t;return y("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Wn.length>0&&this.Jn.Rn((function(){return e.os()})),n.label=5;case 5:return[2]}}))}))},t.prototype.ns=function(t){var e=this,n=this.jn.then((function(){return e.Hn=!0,t().catch((function(t){throw e.Kn=t,e.Hn=!1,p("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Hn=!1,t}))}));return this.jn=n,n},t.prototype.Pn=function(t,e,n){var r=this;this.es(),this.Yn.indexOf(t)>-1&&(e=0);var i=ur.qn(this,t,e,n,(function(t){return r.us(t)}));return this.zn.push(i),i},t.prototype.es=function(){this.Kn&&E()},t.prototype.cs=function(){},t.prototype.hs=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.jn];case 1:e.sent(),e.label=2;case 2:if(t!==this.jn)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.ls=function(t){for(var e=0,n=this.zn;e<n.length;e++)if(n[e].fn===t)return!0;return!1},t.prototype._s=function(t){var e=this;return this.hs().then((function(){e.zn.sort((function(t,e){return t.On-e.On}));for(var n=0,r=e.zn;n<r.length;n++){var i=r[n];if(i.gn(),"all"!==t&&i.fn===t)break}return e.hs()}))},t.prototype.fs=function(t){this.Yn.push(t)},t.prototype.us=function(t){var e=this.zn.indexOf(t);this.zn.splice(e,1)},t}();function cr(t,e){if(p("AsyncQueue",e+": "+t),or(t))return new l(a.UNAVAILABLE,e+": "+t);throw t}var fr=function(){this.ds=void 0,this.listeners=[]},lr=function(){this.ws=new rt((function(t){return Un(t)}),Cn),this.onlineState="Unknown",this.Ts=new Set};function pr(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,u,a,c;return r.__generator(this,(function(r){switch(r.label){case 0:if(n=_(t),i=e.query,o=!1,(s=n.ws.get(i))||(o=!0,s=new fr),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),u=s,[4,n.Es(i)];case 2:return u.ds=r.sent(),[3,4];case 3:return a=r.sent(),c=cr(a,"Initialization of query '"+Mn(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.ws.set(i,s),s.listeners.push(e),e.Is(n.onlineState),s.ds&&e.As(s.ds)&&yr(n),[2]}}))}))}function hr(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,u;return r.__generator(this,(function(r){return n=_(t),i=e.query,o=!1,(s=n.ws.get(i))&&(u=s.listeners.indexOf(e))>=0&&(s.listeners.splice(u,1),o=0===s.listeners.length),o?[2,(n.ws.delete(i),n.Rs(i))]:[2]}))}))}function dr(t,e){for(var n=_(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.ws.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].As(s)&&(r=!0);a.ds=s}}r&&yr(n)}function vr(t,e,n){var r=_(t),i=r.ws.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.ws.delete(e)}function yr(t){t.Ts.forEach((function(t){t.next()}))}var gr=function(){function t(t,e,n){this.query=t,this.ys=e,this.Ps=!1,this.ps=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.As=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Gt(t.query,t.docs,t.Bt,e,t.Qt,t.fromCache,t.jt,!0)}var o=!1;return this.Ps?this.gs(t)&&(this.ys.next(t),o=!0):this.Vs(t,this.onlineState)&&(this.vs(t),o=!0),this.ps=t,o},t.prototype.onError=function(t){this.ys.error(t)},t.prototype.Is=function(t){this.onlineState=t;var e=!1;return this.ps&&!this.Ps&&this.Vs(this.ps,t)&&(this.vs(this.ps),e=!0),e},t.prototype.Vs=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.bs&&n||t.docs.m()&&"Offline"!==e)},t.prototype.gs=function(t){if(t.docChanges.length>0)return!0;var e=this.ps&&this.ps.hasPendingWrites!==t.hasPendingWrites;return!(!t.jt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.vs=function(t){t=Gt.Gt(t.query,t.docs,t.Qt,t.fromCache),this.Ps=!0,this.ys.next(t)},t}(),mr=function(){function t(t){this.uid=t}return t.prototype.Ss=function(){return null!=this.uid},t.prototype.Cs=function(){return this.Ss()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();mr.UNAUTHENTICATED=new mr(null),mr.Ds=new mr("google-credentials-uid"),mr.Fs=new mr("first-party-uid");var wr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Ns=function(t){return n.$s(t)},this.xs=function(t){return e.ks(t)})}return t.prototype.$s=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.xs&&this.xs(t),t},t}();wr.Os=-1;var Er=function(){function t(){this.activeTargetIds=Ut()}return t.prototype.Ms=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ls=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.qs=function(){var t={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),_r=function(){function t(){this.Us=new Er,this.Bs={},this.Qs=null,this.Ns=null}return t.prototype.js=function(t){},t.prototype.Ws=function(t,e,n){},t.prototype.Gs=function(t){return this.Us.Ms(t),this.Bs[t]||"not-current"},t.prototype.zs=function(t,e,n){this.Bs[t]=e},t.prototype.Ks=function(t){this.Us.Ls(t)},t.prototype.Hs=function(t){return this.Us.activeTargetIds.has(t)},t.prototype.Ys=function(t){delete this.Bs[t]},t.prototype.Js=function(){return this.Us.activeTargetIds},t.prototype.Xs=function(t){return this.Us.activeTargetIds.has(t)},t.prototype.start=function(){return this.Us=new Er,Promise.resolve()},t.prototype.Zs=function(t,e,n){},t.prototype.ti=function(t){},t.prototype.ei=function(){},t.prototype.ks=function(t){},t}(),Ir=function(){function t(t,e,n,r){this.batchId=t,this.ni=e,this.baseMutations=n,this.mutations=r}return t.prototype.si=function(t,e,n){for(var r=n.ii,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=nn(o,e,r[i]))}return e},t.prototype.ri=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=rn(i,e,e,this.ni))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=rn(a,e,o,this.ni))}return e},t.prototype.oi=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ri(r.key,t.get(r.key));i&&(n=n.rt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Vt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Z(this.mutations,t.mutations,(function(t,e){return sn(t,e)}))&&Z(this.baseMutations,t.baseMutations,(function(t,e){return sn(t,e)}))},t}(),br=function(){function t(t,e,n,r){this.batch=t,this.ui=e,this.ii=n,this.ci=r}return t.from=function(e,n,r){g(e.mutations.length===r.length);for(var i=Pt,o=e.mutations,s=0;s<o.length;s++)i=i.rt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Tr=function(){function t(t,e,n){this.ai=t,this.hi=e,this.li=n}return t.prototype._i=function(t,e){var n=this;return this.hi.fi(t,e).next((function(r){return n.di(t,e,r)}))},t.prototype.di=function(t,e,n){return this.ai.wi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ri(e,t);return t}))},t.prototype.mi=function(t,e,n){var r=St();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ri(t,e);r=r.rt(t,e)})),r},t.prototype.Ti=function(t,e){var n=this;return this.ai.getEntries(t,e).next((function(e){return n.Ei(t,e)}))},t.prototype.Ei=function(t,e){var n=this;return this.hi.Ii(t,e).next((function(r){var i=n.mi(t,e,r),o=kt();return i.forEach((function(t,e){e||(e=new En(t,at.min())),o=o.rt(t,e)})),o}))},t.prototype.Ai=function(t,e,n){return function(t){return S.N(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Ri(t,e.path):Sn(e)?this.yi(t,e,n):this.Pi(t,e,n)},t.prototype.Ri=function(t,e){return this._i(t,new S(e)).next((function(t){var e=Dt();return t instanceof bn&&(e=e.rt(t.key,t)),e}))},t.prototype.yi=function(t,e,n){var r=this,i=e.collectionGroup,o=Dt();return this.li.pi(t,i).next((function(s){return ir.forEach(s,(function(s){var u=function(t,e){return new In(e,null,t.rn.slice(),t.filters.slice(),t.limit,t.on,t.startAt,t.endAt)}(e,s.child(i));return r.Pi(t,u,n).next((function(t){t.forEach((function(t,e){o=o.rt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Pi=function(t,e,n){var r,i,o=this;return this.ai.Ai(t,e,n).next((function(n){return r=n,o.hi.gi(t,e)})).next((function(e){return i=e,o.Vi(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=rn(a,h,h,o.ni);r=f instanceof bn?r.rt(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){xn(e,n)||(r=r.remove(t))})),r}))},t.prototype.Vi=function(t,e,n){for(var r=Vt(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof cn&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.ai.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof bn&&(c=c.rt(t,e))})),c}))},t}(),Ar=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.vi=n,this.bi=r}return t.Si=function(e,n){for(var r=Vt(),i=Vt(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Nr=function(){function t(t,e,n){this.Ci=t,this.Di=e,this.Fi=n}return t.Ni=function(e){return new t(e,t.$i,t.xi)},t}();Nr.ki=-1,Nr.Oi=1048576,Nr.Mi=41943040,Nr.$i=10,Nr.xi=1e3,Nr.Li=new Nr(Nr.Mi,Nr.$i,Nr.xi),Nr.qi=new Nr(Nr.ki,0,0);var Lr=function(){function t(){this.Ui=new kr}return t.prototype.Bi=function(t,e){return this.Ui.add(e),ir.resolve()},t.prototype.pi=function(t,e){return ir.resolve(this.Ui.getEntries(e))},t}(),kr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t._(),n=t.h(),r=this.index[e]||new At(N.i),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t._(),n=t.h(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new At(N.i)).A()},t}(),Sr=function(){function t(t){this.Qi=t}return t.prototype.next=function(){return this.Qi+=2,this.Qi},t.ji=function(){return new t(0)},t.Wi=function(){return new t(-1)},t}(),Rr=function(){function t(t,e,n){this.persistence=t,this.Gi=e,this.zi=new _t(J),this.Ki=new rt((function(t){return pt(t)}),vt),this.Hi=at.min(),this.hi=t.Yi(n),this.Ji=t.Xi(),this.Zi=t.tr(),this.er=new Tr(this.Ji,this.hi,this.persistence.nr()),this.Gi.sr(this.er)}return t.prototype.ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.rr(n,e.zi)}))},t}();function Dr(t,e){var n=_(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ji.ur({cr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=ir.resolve();return o.forEach((function(t){s=s.next((function(){return r.wi(e,t)})).next((function(e){var o=e,s=n.ci.get(t);g(null!==s),(!o||o.version.L(s)<0)&&(o=i.si(t,o,n))&&r.ar(o,n.ui)}))})),s.next((function(){return t.hi.hr(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.hi.lr(t)})).next((function(){return n.er.Ti(t,r)}))}))}function Pr(t){var e=_(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Zi._r(t)}))}function Or(t,e){var n=_(t),r=e.et,i=n.zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ji.ur({cr:!0});i=n.zi;var s=[];e.zt.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.Zi.dr(t,e.ne,o).next((function(){return n.Zi.wr(t,e.te,o)})));var a=e.resumeToken;if(a.M()>0){var c=u.st(a,r).nt(t.mr);i=i.rt(o,c),function(t,e,n){return g(e.resumeToken.M()>0),0===t.resumeToken.M()||e.et.J()-t.et.J()>=3e8||n.te.size+n.ee.size+n.ne.size>0}(u,c,e)&&s.push(n.Zi.Tr(t,c))}}}));var u=kt(),a=Vt();if(e.Ht.forEach((function(t,e){a=a.add(t)})),s.push(o.getEntries(t,a).next((function(i){e.Ht.forEach((function(a,c){var h=i.get(a);c instanceof En&&c.version.isEqual(at.min())?(o.Er(a,r),u=u.rt(a,c)):null==h||c.version.L(h.version)>0||0===c.version.L(h.version)&&h.hasPendingWrites?(o.ar(c,r),u=u.rt(a,c)):y("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",c.version),e.Yt.has(a)&&s.push(n.persistence.Ar.Ir(t,a))}))}))),!r.isEqual(at.min())){var c=n.Zi._r(t).next((function(e){return n.Zi.Rr(t,t.mr,r)}));s.push(c)}return ir.$n(s).next((function(){return o.apply(t)})).next((function(){return n.er.Ei(t,u)}))})).then((function(t){return n.zi=i,t}))}function Vr(t,e){var n=_(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.hi.yr(t,e)}))}function Cr(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:i=_(t),o=i.zi.get(e),s=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.Ar.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!or(u=r.sent()))throw u;return y("LocalStore","Failed to update sequence numbers for target "+e+": "+u),[3,5];case 5:return i.zi=i.zi.remove(e),i.Ki.delete(o.target),[2]}}))}))}function Ur(t,e,n){var r=_(t),i=at.min(),o=Vt();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=_(t),i=r.Ki.get(n);return void 0!==i?ir.resolve(r.zi.get(i)):r.Zi.Pr(e,n)}(r,t,Dn(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Zi.pr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Gi.Ai(t,e,n?i:at.min(),n?o:Vt())})).next((function(t){return{documents:t,gr:o}}))}))}function Mr(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){if(t.code!==a.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;return y("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var xr=function(){function t(){this.Vr=new At(Gr.vr),this.br=new At(Gr.Sr)}return t.prototype.m=function(){return this.Vr.m()},t.prototype.Cr=function(t,e){var n=new Gr(t,e);this.Vr=this.Vr.add(n),this.br=this.br.add(n)},t.prototype.Dr=function(t,e){var n=this;t.forEach((function(t){return n.Cr(t,e)}))},t.prototype.Fr=function(t,e){this.Nr(new Gr(t,e))},t.prototype.$r=function(t,e){var n=this;t.forEach((function(t){return n.Fr(t,e)}))},t.prototype.kr=function(t){var e=this,n=new S(new N([])),r=new Gr(n,t),i=new Gr(n,t+1),o=[];return this.br.Ft([r,i],(function(t){e.Nr(t),o.push(t.key)})),o},t.prototype.Or=function(){var t=this;this.Vr.forEach((function(e){return t.Nr(e)}))},t.prototype.Nr=function(t){this.Vr=this.Vr.delete(t),this.br=this.br.delete(t)},t.prototype.Mr=function(t){var e=new S(new N([])),n=new Gr(e,t),r=new Gr(e,t+1),i=Vt();return this.br.Ft([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Lr=function(t){var e=new Gr(t,0),n=this.Vr.$t(e);return null!==n&&t.isEqual(n.key)},t}(),Gr=function(){function t(t,e){this.key=t,this.qr=e}return t.vr=function(t,e){return S.i(t.key,e.key)||J(t.qr,e.qr)},t.Sr=function(t,e){return J(t.qr,e.qr)||S.i(t.key,e.key)},t}(),jr=function(t,e){this.user=e,this.type="OAuth",this.Ur={},this.Ur.Authorization="Bearer "+t},Fr=function(){function t(){this.Br=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Qr=function(){},t.prototype.jr=function(t){this.Br=t,t(mr.UNAUTHENTICATED)},t.prototype.Wr=function(){this.Br=null},t}(),qr=function(){function t(t){var e=this;this.Gr=null,this.currentUser=mr.UNAUTHENTICATED,this.zr=!1,this.Kr=0,this.Br=null,this.forceRefresh=!1,this.Gr=function(){e.Kr++,e.currentUser=e.Hr(),e.zr=!0,e.Br&&e.Br(e.currentUser)},this.Kr=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Gr):(this.Gr(null),t.get().then((function(t){e.auth=t,e.Gr&&e.auth.addAuthTokenListener(e.Gr)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Kr,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Kr!==e?(y("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(g("string"==typeof n.accessToken),new jr(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Qr=function(){this.forceRefresh=!0},t.prototype.jr=function(t){this.Br=t,this.zr&&t(this.currentUser)},t.prototype.Wr=function(){this.auth&&this.auth.removeAuthTokenListener(this.Gr),this.Gr=null,this.Br=null},t.prototype.Hr=function(){var t=this.auth&&this.auth.getUid();return g(null===t||"string"==typeof t),new mr(t)},t}(),Br=function(){function t(t,e){this.Yr=t,this.Jr=e,this.type="FirstParty",this.user=mr.Fs}return Object.defineProperty(t.prototype,"Ur",{get:function(){var t={"X-Goog-AuthUser":this.Jr},e=this.Yr.auth.Xr([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Qr=function(){function t(t,e){this.Yr=t,this.Jr=e}return t.prototype.getToken=function(){return Promise.resolve(new Br(this.Yr,this.Jr))},t.prototype.jr=function(t){t(mr.Fs)},t.prototype.Wr=function(){},t.prototype.Qr=function(){},t}(),zr=function(){function t(t,e,n,r,i,o){this._n=t,this.Zr=n,this.eo=r,this.no=i,this.listener=o,this.state=0,this.so=0,this.io=null,this.stream=null,this.Jn=new tr(t,e)}return t.prototype.ro=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.oo=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.uo()},t.prototype.stop=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.ro()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.co=function(){this.state=0,this.Jn.reset()},t.prototype.ao=function(){var t=this;this.oo()&&null===this.io&&(this.io=this._n.Pn(this.Zr,6e4,(function(){return t.ho()})))},t.prototype.lo=function(t){this._o(),this.stream.send(t)},t.prototype.ho=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.oo()?[2,this.close(0)]:[2]}))}))},t.prototype._o=function(){this.io&&(this.io.cancel(),this.io=null)},t.prototype.close=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return this._o(),this.Jn.cancel(),this.so++,3!==t?this.Jn.reset():e&&e.code===a.RESOURCE_EXHAUSTED?(p(e.toString()),p("Using maximum backoff delay to prevent overloading the backend."),this.Jn.An()):e&&e.code===a.UNAUTHENTICATED&&this.no.Qr(),null!==this.stream&&(this.fo(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.do(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.fo=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.wo(this.so),n=this.so;this.no.getToken().then((function(e){t.so===n&&t.mo(e)}),(function(n){e((function(){var e=new l(a.UNKNOWN,"Fetching auth token failed: "+n.message);return t.To(e)}))}))},t.prototype.mo=function(t){var e=this,n=this.wo(this.so);this.stream=this.Eo(t),this.stream.Io((function(){n((function(){return e.state=2,e.listener.Io()}))})),this.stream.do((function(t){n((function(){return e.To(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.uo=function(){var t=this;this.state=4,this.Jn.Rn((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.To=function(t){return y("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.wo=function(t){var e=this;return function(n){e._n.Qn((function(){return e.so===t?n():(y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Wr=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return r.__extends(e,t),e.prototype.Eo=function(t){return this.eo.Ao("Listen",t)},e.prototype.onMessage=function(t){this.Jn.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:E()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Be?(g(void 0===e||"string"==typeof e),$.fromBase64String(e||"")):(g(void 0===e||e instanceof Uint8Array),$.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(t){var e=void 0===t.code?a.UNKNOWN:Et(t.code);return new l(e,t.message||"")}(s);n=new Qt(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;var c=e.documentChange;c.document,c.document.name,c.document.updateTime;var h=Ae(t,c.document.name),f=_e(c.document.updateTime),p=new yn({mapValue:{fields:c.document.fields}}),d=new bn(h,f,p,{}),v=c.targetIds||[],y=c.removedTargetIds||[];n=new qt(v,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;var m=e.documentDelete;m.document;var b=Ae(t,m.document),w=m.readTime?_e(m.readTime):at.min(),_=new En(b,w),I=m.removedTargetIds||[];n=new qt([],I,_.key,_)}else if("documentRemove"in e){e.documentRemove;var T=e.documentRemove;T.document;var A=Ae(t,T.document),N=T.removedTargetIds||[];n=new qt([],N,A,null)}else{if(!("filter"in e))return E();e.filter;var L=e.filter;L.targetId;var k=L.count||0,S=new wt(k),R=L.targetId;n=new Bt(R,S)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return at.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?at.min():e.readTime?_e(e.readTime):at.min()}(t);return this.listener.Ro(e,n)},e.prototype.yo=function(t){var e={};e.database=Le(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=yt(r)?{documents:Re(t,r)}:{query:De(t,r)}).targetId=e.targetId,e.resumeToken.M()>0&&(n.resumeToken=be(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return E()}}(0,e.tt);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.lo(e)},e.prototype.Po=function(t){var e={};e.database=Le(this.serializer),e.removeTarget=t,this.lo(e)},e}(zr),Kr=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.po=!1,s}return r.__extends(e,t),Object.defineProperty(e.prototype,"Vo",{get:function(){return this.po},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.po=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.fo=function(){this.po&&this.vo([])},e.prototype.Eo=function(t){return this.eo.Ao("Write",t)},e.prototype.onMessage=function(t){if(g(!!t.streamToken),this.lastStreamToken=t.streamToken,this.po){this.Jn.reset();var e=function(t,e){return t&&t.length>0?(g(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?_e(t.updateTime):_e(e);n.isEqual(at.min())&&(n=_e(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Ze(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=_e(t.commitTime);return this.listener.bo(n,e)}return g(!t.writeResults||0===t.writeResults.length),this.po=!0,this.listener.So()},e.prototype.Co=function(){var t={};t.database=Le(this.serializer),this.lo(t)},e.prototype.vo=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Se(e.serializer,t)}))};this.lo(n)},e}(zr),Hr=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.eo=n,i.serializer=r,i.Do=!1,i}return r.__extends(e,t),e.prototype.Fo=function(){if(this.Do)throw new l(a.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.No=function(t,e,n){var r=this;return this.Fo(),this.credentials.getToken().then((function(i){return r.eo.No(t,e,n,i)})).catch((function(t){throw t.code===a.UNAUTHENTICATED&&r.credentials.Qr(),t}))},e.prototype.$o=function(t,e,n){var r=this;return this.Fo(),this.credentials.getToken().then((function(i){return r.eo.$o(t,e,n,i)})).catch((function(t){throw t.code===a.UNAUTHENTICATED&&r.credentials.Qr(),t}))},e.prototype.terminate=function(){this.Do=!1},e}((function(){})),Xr=function(){function t(t,e){this.kn=t,this.Qs=e,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}return t.prototype.Mo=function(){var t=this;0===this.xo&&(this.Lo("Unknown"),this.ko=this.kn.Pn("online_state_timeout",1e4,(function(){return t.ko=null,t.qo("Backend didn't respond within 10 seconds."),t.Lo("Offline"),Promise.resolve()})))},t.prototype.Uo=function(t){"Online"===this.state?this.Lo("Unknown"):(this.xo++,this.xo>=1&&(this.Bo(),this.qo("Connection failed 1 times. Most recent error: "+t.toString()),this.Lo("Offline")))},t.prototype.set=function(t){this.Bo(),this.xo=0,"Online"===t&&(this.Oo=!1),this.Lo(t)},t.prototype.Lo=function(t){t!==this.state&&(this.state=t,this.Qs(t))},t.prototype.qo=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Oo?(p(e),this.Oo=!1):y("OnlineStateTracker",e)},t.prototype.Bo=function(){null!==this.ko&&(this.ko.cancel(),this.ko=null)},t}(),Yr=function(t,e,n,i,o){var s=this;this.Qo=t,this.jo=e,this.kn=n,this.Wo={},this.Go=[],this.zo=new Map,this.Ko=new Set,this.Ho=[],this.Yo=o,this.Yo.Jo((function(t){n.Qn((function(){return r.__awaiter(s,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return si(this)?(y("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=_(t)).Ko.add(4),[4,Zr(e)];case 1:return n.sent(),e.Xo.set("Unknown"),e.Ko.delete(4),[4,Jr(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Xo=new Xr(n,i)};function Jr(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:if(!si(t))return[3,4];e=0,n=t.Ho,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Zr(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:e=0,n=t.Ho,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function $r(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return e=_(t),y("RemoteStore","RemoteStore shutting down."),e.Ko.add(5),[4,Zr(e)];case 1:return n.sent(),e.Yo.ei(),e.Xo.set("Unknown"),[2]}}))}))}function ti(t,e){var n=_(t);n.zo.has(e.targetId)||(n.zo.set(e.targetId,e),oi(n)?ii(n):bi(n).oo()&&ni(n,e))}function ei(t,e){var n=_(t),r=bi(n);n.zo.delete(e),r.oo()&&ri(n,e),0===n.zo.size&&(r.oo()?r.ao():si(n)&&n.Xo.set("Unknown"))}function ni(t,e){t.Zo.Ee(e.targetId),bi(t).yo(e)}function ri(t,e){t.Zo.Ee(e),bi(t).Po(e)}function ii(t){t.Zo=new Wt({qe:function(e){return t.Wo.qe(e)},Ue:function(e){return t.zo.get(e)||null}}),bi(t).start(),t.Xo.Mo()}function oi(t){return si(t)&&!bi(t).ro()&&t.zo.size>0}function si(t){return 0===_(t).Ko.size}function ui(t){t.Zo=void 0}function ai(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return t.zo.forEach((function(e,n){ni(t,e)})),[2]}))}))}function ci(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){return ui(t),oi(t)?(t.Xo.Uo(e),ii(t)):t.Xo.set("Unknown"),[2]}))}))}function hi(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s;return r.__generator(this,(function(u){switch(u.label){case 0:if(t.Xo.set("Online"),!(e instanceof Qt&&2===e.state&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?(s=o[i],t.zo.has(s)?[4,t.Wo.tu(s,n)]:[3,3]):[3,5];case 2:r.sent(),t.zo.delete(s),t.Zo.removeTarget(s),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return u.sent(),[3,5];case 3:return i=u.sent(),y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,fi(t,i)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof qt?t.Zo.Ve(e):e instanceof Bt?t.Zo.$e(e):t.Zo.Se(e),n.isEqual(at.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,Pr(t.Qo)];case 8:return o=u.sent(),n.L(o)>=0?[4,function(t,e){var n=t.Zo.Oe(e);return n.zt.forEach((function(n,r){if(n.resumeToken.M()>0){var i=t.zo.get(r);i&&t.zo.set(r,i.st(n.resumeToken,e))}})),n.Kt.forEach((function(e){var n=t.zo.get(e);if(n){t.zo.set(e,n.st($.q,n.et)),ri(t,e);var r=new mt(n.target,e,1,n.sequenceNumber);ni(t,r)}})),t.Wo.eu(n)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return y("RemoteStore","Failed to raise snapshot:",s=u.sent()),[4,fi(t,s)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function fi(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i=this;return r.__generator(this,(function(o){switch(o.label){case 0:if(!or(e))throw e;return t.Ko.add(1),[4,Zr(t)];case 1:return o.sent(),t.Xo.set("Offline"),n||(n=function(){return Pr(t.Qo)}),t.kn.rs((function(){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return y("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Ko.delete(1),[4,Jr(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function pi(t,e){return e().catch((function(n){return fi(t,n,e)}))}function di(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:e=_(t),n=Ei(e),i=e.Go.length>0?e.Go[e.Go.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return si(t)&&t.Go.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Vr(e.Qo,i)];case 3:return null===(o=r.sent())?(0===e.Go.length&&n.ao(),[3,7]):(i=o.batchId,function(t,e){t.Go.push(e);var n=Ei(t);n.oo()&&n.Vo&&n.vo(e.mutations)}(e,o),[3,6]);case 4:return s=r.sent(),[4,fi(e,s)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return vi(e)&&li(e),[2]}}))}))}function vi(t){return si(t)&&!Ei(t).ro()&&t.Go.length>0}function li(t){Ei(t).start()}function yi(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return Ei(t).Co(),[2]}))}))}function gi(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o;return r.__generator(this,(function(r){for(e=Ei(t),n=0,i=t.Go;n<i.length;n++)o=i[n],e.vo(o.mutations);return[2]}))}))}function mi(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return i=t.Go.shift(),o=br.from(i,e,n),[4,pi(t,(function(){return t.Wo.nu(o)}))];case 1:return r.sent(),[4,di(t)];case 2:return r.sent(),[2]}}))}))}function wi(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return e&&Ei(t).Vo?[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return bt(i=e.code)&&i!==a.ABORTED?(n=t.Go.shift(),Ei(t).co(),[4,pi(t,(function(){return t.Wo.su(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,di(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return vi(t)&&li(t),[2]}}))}))}function bi(t){var e=this;return t.iu||(t.iu=function(t,e,n){var r=_(t);return r.Fo(),new Wr(e,r.eo,r.credentials,r.serializer,n)}(t.jo,t.kn,{Io:ai.bind(null,t),do:ci.bind(null,t),Ro:hi.bind(null,t)}),t.Ho.push((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return n?(t.iu.co(),oi(t)?ii(t):t.Xo.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.iu.stop()];case 2:e.sent(),ui(t),e.label=3;case 3:return[2]}}))}))}))),t.iu}function Ei(t){var e=this;return t.ru||(t.ru=function(t,e,n){var r=_(t);return r.Fo(),new Kr(e,r.eo,r.credentials,r.serializer,n)}(t.jo,t.kn,{Io:yi.bind(null,t),do:wi.bind(null,t),So:gi.bind(null,t),bo:mi.bind(null,t)}),t.Ho.push((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return n?(t.ru.co(),[4,di(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.ru.stop()];case 3:e.sent(),t.Go.length>0&&(y("RemoteStore","Stopping write stream with "+t.Go.length+" pending writes"),t.Go=[]),e.label=4;case 4:return[2]}}))}))}))),t.ru}var _i=function(t){this.key=t},Ii=function(t){this.key=t},Ti=function(){function t(t,e){this.query=t,this.ou=e,this.uu=null,this.Zt=!1,this.cu=Vt(),this.Qt=Vt(),this.au=Gn(t),this.hu=new Mt(this.au)}return Object.defineProperty(t.prototype,"lu",{get:function(){return this.ou},enumerable:!1,configurable:!0}),t.prototype._u=function(t,e){var n=this,r=e?e.fu:new xt,i=e?e.hu:this.hu,o=e?e.Qt:this.Qt,s=i,u=!1,a=An(this.query)&&i.size===this.query.limit?i.last():null,c=Nn(this.query)&&i.size===this.query.limit?i.first():null;if(t.at((function(t,e){var h=i.get(t),f=e instanceof bn?e:null;f&&(f=xn(n.query,f)?f:null);var l=!!h&&n.Qt.has(h.key),p=!!f&&(f.Ye||n.Qt.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.du(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.au(f,a)>0||c&&n.au(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),An(this.query)||Nn(this.query))for(;s.size>this.query.limit;){var h=An(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{hu:s,fu:r,wu:u,Qt:o}},t.prototype.du=function(t,e){return t.Ye&&e.hasCommittedMutations&&!e.Ye},t.prototype.mu=function(t,e,n){var r=this,i=this.hu;this.hu=t.hu,this.Qt=t.Qt;var o=t.fu.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return E()}};return n(t)-n(e)}(t.type,e.type)||r.au(t.doc,e.doc)})),this.Tu(n);var s=e?this.Eu():[],u=0===this.cu.size&&this.Zt?1:0,a=u!==this.uu;return this.uu=u,0!==o.length||a?{snapshot:new Gt(this.query,t.hu,i,o,t.Qt,0===u,a,!1),Iu:s}:{Iu:s}},t.prototype.Is=function(t){return this.Zt&&"Offline"===t?(this.Zt=!1,this.mu({hu:this.hu,fu:new xt,Qt:this.Qt,wu:!1},!1)):{Iu:[]}},t.prototype.Au=function(t){return!this.ou.has(t)&&!!this.hu.has(t)&&!this.hu.get(t).Ye},t.prototype.Tu=function(t){var e=this;t&&(t.te.forEach((function(t){return e.ou=e.ou.add(t)})),t.ee.forEach((function(t){})),t.ne.forEach((function(t){return e.ou=e.ou.delete(t)})),this.Zt=t.Zt)},t.prototype.Eu=function(){var t=this;if(!this.Zt)return[];var e=this.cu;this.cu=Vt(),this.hu.forEach((function(e){t.Au(e.key)&&(t.cu=t.cu.add(e.key))}));var n=[];return e.forEach((function(e){t.cu.has(e)||n.push(new Ii(e))})),this.cu.forEach((function(t){e.has(t)||n.push(new _i(t))})),n},t.prototype.Ru=function(t){this.ou=t.gr,this.cu=Vt();var e=this._u(t.documents);return this.mu(e,!0)},t.prototype.yu=function(){return Gt.Gt(this.query,this.hu,this.Qt,0===this.uu)},t}(),Ai=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ni=function(t){this.key=t,this.Pu=!1},Li=function(){function t(t,e,n,r,i,o){this.Qo=t,this.pu=e,this.gu=n,this.Vu=r,this.currentUser=i,this.vu=o,this.bu={},this.Su=new rt((function(t){return Un(t)}),Cn),this.Cu=new Map,this.Du=[],this.Fu=new _t(S.i),this.Nu=new Map,this.$u=new xr,this.xu={},this.ku=new Map,this.Ou=Sr.Wi(),this.onlineState="Unknown",this.Mu=void 0}return Object.defineProperty(t.prototype,"Lu",{get:function(){return!0===this.Mu},enumerable:!1,configurable:!0}),t}();function ki(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,u,a;return r.__generator(this,(function(c){switch(c.label){case 0:return n=function(t){var e=_(t);return e.pu.Wo.eu=Di.bind(null,e),e.pu.Wo.qe=zi.bind(null,e),e.pu.Wo.tu=Oi.bind(null,e),e.bu.Ro=dr.bind(null,e.gu),e.bu.qu=vr.bind(null,e.gu),e}(t),(s=n.Su.get(e))?(i=s.targetId,n.Vu.Gs(i),o=s.view.yu(),[3,4]):[3,1];case 1:return[4,function(t,e){var n=_(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Zi.Pr(t,e).next((function(i){return i?(r=i,ir.resolve(r)):n.Zi.Uu(t).next((function(i){return r=new mt(e,i,0,t.mr),n.Zi.Bu(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.zi.get(t.targetId);return(null===r||t.et.L(r.et)>0)&&(n.zi=n.zi.rt(t.targetId,t),n.Ki.set(e,t.targetId)),t}))}(n.Qo,Dn(e))];case 2:return u=c.sent(),a=n.Vu.Gs(u.targetId),i=u.targetId,[4,function(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,s,u,a,c,h;return r.__generator(this,(function(f){switch(f.label){case 0:return t.Qu=function(e,n,i){return function(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=e.view._u(n)).wu?[4,Ur(t.Qo,e.query,!1).then((function(t){var n=t.documents;return e.view._u(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return s=i&&i.zt.get(e.targetId),u=e.view.mu(o,t.Lu,s),[2,(ji(t,e.targetId,u.Iu),u.snapshot)]}}))}))}(t,e,n,i)},[4,Ur(t.Qo,e,!0)];case 1:return o=f.sent(),s=new Ti(e,o.gr),u=s._u(o.documents),a=Ft.Xt(n,i&&"Offline"!==t.onlineState),c=s.mu(u,t.Lu,a),ji(t,n,c.Iu),h=new Ai(e,n,s),t.Su.set(e,h),t.Cu.has(n)?t.Cu.get(n).push(e):t.Cu.set(n,[e]),[2,c.snapshot]}}))}))}(n,e,i,"current"===a)];case 3:o=c.sent(),n.Lu&&ti(n.pu,u),c.label=4;case 4:return[2,o]}}))}))}function Si(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),i=n.Su.get(e),(o=n.Cu.get(i.targetId)).length>1?[2,(n.Cu.set(i.targetId,o.filter((function(t){return!Cn(t,e)}))),void n.Su.delete(e))]:n.Lu?(n.Vu.Ks(i.targetId),n.Vu.Xs(i.targetId)?[3,2]:[4,Cr(n.Qo,i.targetId,!1).then((function(){n.Vu.Ys(i.targetId),ei(n.pu,i.targetId),xi(n,i.targetId)})).catch(Mr)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return xi(n,i.targetId),[4,Cr(n.Qo,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function Ri(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:i=function(t){var e=_(t);return e.pu.Wo.nu=Vi.bind(null,e),e.pu.Wo.su=Ci.bind(null,e),e}(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=_(t),i=ut.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Vt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.er.Ti(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=on(c,n.get(c.key));null!=h&&s.push(new cn(c.key,h,mn(h.proto.mapValue),$e.exists(!0)))}return r.hi.ju(t,i,s,e)}))})).then((function(t){var e=t.oi(n);return{batchId:t.batchId,Wu:e}}))}(i.Qo,e)];case 2:return o=r.sent(),i.Vu.js(o.batchId),function(t,e,n){var r=t.xu[t.currentUser.Cs()];r||(r=new _t(J)),r=r.rt(e,n),t.xu[t.currentUser.Cs()]=r}(i,o.batchId,n),[4,Bi(i,o.Wu)];case 3:return r.sent(),[4,di(i.pu)];case 4:return r.sent(),[3,6];case 5:return s=r.sent(),u=cr(s,"Failed to persist write"),n.reject(u),[3,6];case 6:return[2]}}))}))}function Di(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:n=_(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Or(n.Qo,e)];case 2:return i=r.sent(),e.zt.forEach((function(t,e){var r=n.Nu.get(e);r&&(g(t.te.size+t.ee.size+t.ne.size<=1),t.te.size>0?r.Pu=!0:t.ee.size>0?g(r.Pu):t.ne.size>0&&(g(r.Pu),r.Pu=!1))})),[4,Bi(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,Mr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Pi(t,e,n){var r=_(t);if(r.Lu&&0===n||!r.Lu&&1===n){var i=[];r.Su.forEach((function(t,n){var r=n.view.Is(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=_(t);n.onlineState=e;var r=!1;n.ws.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Is(e)&&(r=!0)})),r&&yr(n)}(r.gu,e),i.length&&r.bu.Ro(i),r.onlineState=e,r.Lu&&r.Vu.ti(e)}}function Oi(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,u,a,c;return r.__generator(this,(function(r){switch(r.label){case 0:return(i=_(t)).Vu.zs(e,"rejected",n),o=i.Nu.get(e),(s=o&&o.key)?(u=(u=new _t(S.i)).rt(s,new En(s,at.min())),a=Vt().add(s),c=new jt(at.min(),new Map,new At(J),u,a),[4,Di(i,c)]):[3,2];case 1:return r.sent(),i.Fu=i.Fu.remove(s),i.Nu.delete(e),qi(i),[3,4];case 2:return[4,Cr(i.Qo,e,!1).then((function(){return xi(i,e,n)})).catch(Mr)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function Vi(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:n=_(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Dr(n.Qo,e)];case 2:return o=r.sent(),Mi(n,i,null),Ui(n,i),n.Vu.Ws(i,"acknowledged"),[4,Bi(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,Mr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ci(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:i=_(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=_(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.hi.Gu(t,e).next((function(e){return g(null!==e),r=e.keys(),n.hi.hr(t,e)})).next((function(){return n.hi.lr(t)})).next((function(){return n.er.Ti(t,r)}))}))}(i.Qo,e)];case 2:return o=r.sent(),Mi(i,e,n),Ui(i,e),i.Vu.Ws(e,"rejected",n),[4,Bi(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,Mr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ui(t,e){(t.ku.get(e)||[]).forEach((function(t){t.resolve()})),t.ku.delete(e)}function Mi(t,e,n){var r=_(t),i=r.xu[r.currentUser.Cs()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xu[r.currentUser.Cs()]=i}}function xi(t,e,n){void 0===n&&(n=null),t.Vu.Ks(e);for(var r=0,i=t.Cu.get(e);r<i.length;r++){var o=i[r];t.Su.delete(o),n&&t.bu.qu(o,n)}t.Cu.delete(e),t.Lu&&t.$u.kr(e).forEach((function(e){t.$u.Lr(e)||Gi(t,e)}))}function Gi(t,e){var n=t.Fu.get(e);null!==n&&(ei(t.pu,n),t.Fu=t.Fu.remove(e),t.Nu.delete(n),qi(t))}function ji(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof _i?(t.$u.Cr(o.key,e),Fi(t,o)):o instanceof Ii?(y("SyncEngine","Document no longer in limbo: "+o.key),t.$u.Fr(o.key,e),t.$u.Lr(o.key)||Gi(t,o.key)):E()}}function Fi(t,e){var n=e.key;t.Fu.get(n)||(y("SyncEngine","New document in limbo: "+n),t.Du.push(n),qi(t))}function qi(t){for(;t.Du.length>0&&t.Fu.size<t.vu;){var e=t.Du.shift(),n=t.Ou.next();t.Nu.set(n,new Ni(e)),t.Fu=t.Fu.rt(e,n),ti(t.pu,new mt(Dn(Tn(e.path)),n,2,wr.Os))}}function Bi(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,u;return r.__generator(this,(function(a){switch(a.label){case 0:return i=_(t),o=[],s=[],u=[],i.Su.m()?[3,3]:(i.Su.forEach((function(t,r){u.push(i.Qu(r,e,n).then((function(t){if(t){i.Lu&&i.Vu.zs(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=Ar.Si(r.targetId,t);s.push(e)}})))})),[4,Promise.all(u)]);case 1:return a.sent(),i.bu.Ro(o),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,u,a,c,h,f;return r.__generator(this,(function(r){switch(r.label){case 0:n=_(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return ir.forEach(e,(function(e){return ir.forEach(e.vi,(function(r){return n.persistence.Ar.Cr(t,e.targetId,r)})).next((function(){return ir.forEach(e.bi,(function(r){return n.persistence.Ar.Fr(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!or(i=r.sent()))throw i;return y("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=e;o<s.length;o++)u=s[o],a=u.targetId,u.fromCache||(c=n.zi.get(a),h=c.et,f=c.it(h),n.zi=n.zi.rt(a,f));return[2]}}))}))}(i.Qo,s)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Qi(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(o){switch(o.label){case 0:return(n=_(t)).currentUser.isEqual(e)?[3,3]:(y("SyncEngine","User change. New user:",e.Cs()),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),i=n.hi,o=n.er,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n.hi.Ku(t).next((function(s){return r=s,i=n.persistence.Yi(e),o=new Tr(n.Ji,i,n.persistence.nr()),i.Ku(t)})).next((function(e){for(var n=[],i=[],s=Vt(),u=0,a=r;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];i.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return o.Ti(t,s).next((function(t){return{Hu:t,Yu:n,Ju:i}}))}))}))];case 1:return s=r.sent(),[2,(n.hi=i,n.er=o,n.Gi.sr(n.er),s)]}}))}))}(n.Qo,e)]);case 1:return i=o.sent(),n.currentUser=e,function(t,e){t.ku.forEach((function(t){t.forEach((function(t){t.reject(new l(a.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ku.clear()}(n),n.Vu.Zs(e,i.Yu,i.Ju),[4,Bi(n,i.Hu)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function zi(t,e){var n=_(t),r=n.Nu.get(e);if(r&&r.Pu)return Vt().add(r.key);var i=Vt(),o=n.Cu.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Su.get(a);i=i.xt(c.view.lu)}return i}var Wi=function(){function t(){}return t.prototype.sr=function(t){this.Xu=t},t.prototype.Ai=function(t,e,n,i){var r=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.rn.length||1===t.rn.length&&t.rn[0].field.V())}(e)||n.isEqual(at.min())?this.Zu(t,e):this.Xu.Ti(t,i).next((function(s){var u=r.tc(e,s);return(An(e)||Nn(e))&&r.wu(e.on,u,i,n)?r.Zu(t,e):(v()<=c.LogLevel.DEBUG&&y("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Mn(e)),r.Xu.Ai(t,e,n).next((function(t){return u.forEach((function(e){t=t.rt(e.key,e)})),t})))}))},t.prototype.tc=function(t,e){var n=new At(Gn(t));return e.forEach((function(e,r){r instanceof bn&&xn(t,r)&&(n=n.add(r))})),n},t.prototype.wu=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.L(r)>0)},t.prototype.Zu=function(t,e){return v()<=c.LogLevel.DEBUG&&y("IndexFreeQueryEngine","Using full collection scan to execute query:",Mn(e)),this.Xu.Ai(t,e,at.min())},t}(),Ki=function(){function t(t,e){this.li=t,this.Ar=e,this.hi=[],this.ec=1,this.nc=new At(Gr.vr)}return t.prototype.sc=function(t){return ir.resolve(0===this.hi.length)},t.prototype.ju=function(t,e,n,r){var i=this.ec;this.ec++,this.hi.length>0&&this.hi[this.hi.length-1];var o=new Ir(i,e,n,r);this.hi.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.nc=this.nc.add(new Gr(a.key,i)),this.li.Bi(t,a.key.path.h())}return ir.resolve(o)},t.prototype.Gu=function(t,e){return ir.resolve(this.ic(e))},t.prototype.yr=function(t,e){var n=e+1,r=this.rc(n),i=r<0?0:r;return ir.resolve(this.hi.length>i?this.hi[i]:null)},t.prototype.zu=function(){return ir.resolve(0===this.hi.length?-1:this.ec-1)},t.prototype.Ku=function(t){return ir.resolve(this.hi.slice())},t.prototype.fi=function(t,e){var n=this,r=new Gr(e,0),i=new Gr(e,Number.POSITIVE_INFINITY),o=[];return this.nc.Ft([r,i],(function(t){var e=n.ic(t.qr);o.push(e)})),ir.resolve(o)},t.prototype.Ii=function(t,e){var n=this,r=new At(J);return e.forEach((function(t){var e=new Gr(t,0),i=new Gr(t,Number.POSITIVE_INFINITY);n.nc.Ft([e,i],(function(t){r=r.add(t.qr)}))})),ir.resolve(this.oc(r))},t.prototype.gi=function(t,e){var n=e.path,r=n.length+1,i=n;S.N(i)||(i=i.child(""));var o=new Gr(new S(i),0),s=new At(J);return this.nc.Nt((function(t){var e=t.key.path;return!!n.T(e)&&(e.length===r&&(s=s.add(t.qr)),!0)}),o),ir.resolve(this.oc(s))},t.prototype.oc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.ic(t);null!==r&&n.push(r)})),n},t.prototype.hr=function(t,e){var n=this;g(0===this.uc(e.batchId,"removed")),this.hi.shift();var r=this.nc;return ir.forEach(e.mutations,(function(i){var o=new Gr(i.key,e.batchId);return r=r.delete(o),n.Ar.cc(t,i.key)})).next((function(){n.nc=r}))},t.prototype.ac=function(t){},t.prototype.Lr=function(t,e){var n=new Gr(e,0),r=this.nc.$t(n);return ir.resolve(e.isEqual(r&&r.key))},t.prototype.lr=function(t){return this.hi.length,ir.resolve()},t.prototype.uc=function(t,e){return this.rc(t)},t.prototype.rc=function(t){return 0===this.hi.length?0:t-this.hi[0].batchId},t.prototype.ic=function(t){var e=this.rc(t);return e<0||e>=this.hi.length?null:this.hi[e]},t}(),Hi=function(){function t(t,e){this.li=t,this.hc=e,this.docs=new _t(S.i),this.size=0}return t.prototype.ar=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.hc(e);return this.docs=this.docs.rt(r,{lc:e,size:s,readTime:n}),this.size+=s-o,this.li.Bi(t,r.path.h())},t.prototype.Er=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.wi=function(t,e){var n=this.docs.get(e);return ir.resolve(n?n.lc:null)},t.prototype.getEntries=function(t,e){var n=this,r=St();return e.forEach((function(t){var e=n.docs.get(t);r=r.rt(t,e?e.lc:null)})),ir.resolve(r)},t.prototype.Ai=function(t,e,n){for(var r=Dt(),i=new S(e.path.child("")),o=this.docs._t(i);o.It();){var s=o.Et(),u=s.key,a=s.value,c=a.lc,h=a.readTime;if(!e.path.T(u.path))break;h.L(n)<=0||c instanceof bn&&xn(e,c)&&(r=r.rt(c.key,c))}return ir.resolve(r)},t.prototype._c=function(t,e){return ir.forEach(this.docs,(function(t){return e(t)}))},t.prototype.ur=function(e){return new t.fc(this)},t.prototype.dc=function(t){return ir.resolve(this.size)},t}();Hi.fc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ac=e,n}return r.__extends(e,t),e.prototype.mu=function(t){var e=this,n=[];return this.Wu.forEach((function(r,i){i?n.push(e.Ac.ar(t,i,e.readTime)):e.Ac.Er(r)})),ir.$n(n)},e.prototype.Ec=function(t,e){return this.Ac.wi(t,e)},e.prototype.Ic=function(t,e){return this.Ac.getEntries(t,e)},e}(function(){function t(){this.Wu=new rt((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.wc=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.mc},set:function(t){this.mc=t},enumerable:!1,configurable:!0}),t.prototype.ar=function(t,e){this.Tc(),this.readTime=e,this.Wu.set(t.key,t)},t.prototype.Er=function(t,e){this.Tc(),e&&(this.readTime=e),this.Wu.set(t,null)},t.prototype.wi=function(t,e){this.Tc();var n=this.Wu.get(e);return void 0!==n?ir.resolve(n):this.Ec(t,e)},t.prototype.getEntries=function(t,e){return this.Ic(t,e)},t.prototype.apply=function(t){return this.Tc(),this.wc=!0,this.mu(t)},t.prototype.Tc=function(){},t}());var Xi=function(){function t(t){this.persistence=t,this.Rc=new rt((function(t){return pt(t)}),vt),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.yc=0,this.Pc=new xr,this.targetCount=0,this.gc=Sr.ji()}return t.prototype.Ce=function(t,e){return this.Rc.forEach((function(t,n){return e(n)})),ir.resolve()},t.prototype._r=function(t){return ir.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Vc=function(t){return ir.resolve(this.yc)},t.prototype.Uu=function(t){return this.highestTargetId=this.gc.next(),ir.resolve(this.highestTargetId)},t.prototype.Rr=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.yc&&(this.yc=e),ir.resolve()},t.prototype.vc=function(t){this.Rc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.gc=new Sr(e),this.highestTargetId=e),t.sequenceNumber>this.yc&&(this.yc=t.sequenceNumber)},t.prototype.Bu=function(t,e){return this.vc(e),this.targetCount+=1,ir.resolve()},t.prototype.Tr=function(t,e){return this.vc(e),ir.resolve()},t.prototype.bc=function(t,e){return this.Rc.delete(e.target),this.Pc.kr(e.targetId),this.targetCount-=1,ir.resolve()},t.prototype.Sc=function(t,e,n){var r=this,i=0,o=[];return this.Rc.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.Rc.delete(s),o.push(r.Cc(t,u.targetId)),i++)})),ir.$n(o).next((function(){return i}))},t.prototype.Dc=function(t){return ir.resolve(this.targetCount)},t.prototype.Pr=function(t,e){var n=this.Rc.get(e)||null;return ir.resolve(n)},t.prototype.wr=function(t,e,n){return this.Pc.Dr(e,n),ir.resolve()},t.prototype.dr=function(t,e,n){this.Pc.$r(e,n);var r=this.persistence.Ar,i=[];return r&&e.forEach((function(e){i.push(r.cc(t,e))})),ir.$n(i)},t.prototype.Cc=function(t,e){return this.Pc.kr(e),ir.resolve()},t.prototype.pr=function(t,e){var n=this.Pc.Mr(e);return ir.resolve(n)},t.prototype.Lr=function(t,e){return ir.resolve(this.Pc.Lr(e))},t}(),Yi=function(){function t(t){var e=this;this.Fc={},this.Nc=new wr(0),this.$c=!1,this.$c=!0,this.Ar=t(this),this.Zi=new Xi(this),this.li=new Lr,this.ai=new Hi(this.li,(function(t){return e.Ar.xc(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ei=function(){return this.$c=!1,Promise.resolve()},Object.defineProperty(t.prototype,"kc",{get:function(){return this.$c},enumerable:!1,configurable:!0}),t.prototype.Oc=function(){},t.prototype.Mc=function(){},t.prototype.nr=function(){return this.li},t.prototype.Yi=function(t){var e=this.Fc[t.Cs()];return e||(e=new Ki(this.li,this.Ar),this.Fc[t.Cs()]=e),e},t.prototype.tr=function(){return this.Zi},t.prototype.Xi=function(){return this.ai},t.prototype.runTransaction=function(t,e,n){var r=this;y("MemoryPersistence","Starting transaction:",t);var i=new Ji(this.Nc.next());return this.Ar.Lc(),n(i).next((function(t){return r.Ar.qc(i).next((function(){return t}))})).Fn().then((function(t){return i.Uc(),t}))},t.prototype.Bc=function(t,e){return ir.xn(Object.values(this.Fc).map((function(n){return function(){return n.Lr(t,e)}})))},t}(),Ji=function(t){function e(e){var n=this;return(n=t.call(this)||this).mr=e,n}return r.__extends(e,t),e}(function(){function t(){this.Qc=[]}return t.prototype.jc=function(t){this.Qc.push(t)},t.prototype.Uc=function(){this.Qc.forEach((function(t){return t()}))},t}()),Zi=function(){function t(t){this.persistence=t,this.Wc=new xr,this.Gc=null}return t.zc=function(e){return new t(e)},Object.defineProperty(t.prototype,"Kc",{get:function(){if(this.Gc)return this.Gc;throw E()},enumerable:!1,configurable:!0}),t.prototype.Cr=function(t,e,n){return this.Wc.Cr(n,e),this.Kc.delete(n.toString()),ir.resolve()},t.prototype.Fr=function(t,e,n){return this.Wc.Fr(n,e),this.Kc.add(n.toString()),ir.resolve()},t.prototype.cc=function(t,e){return this.Kc.add(e.toString()),ir.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Wc.kr(e.targetId).forEach((function(t){return n.Kc.add(t.toString())}));var r=this.persistence.tr();return r.pr(t,e.targetId).next((function(t){t.forEach((function(t){return n.Kc.add(t.toString())}))})).next((function(){return r.bc(t,e)}))},t.prototype.Lc=function(){this.Gc=new Set},t.prototype.qc=function(t){var e=this,n=this.persistence.Xi().ur();return ir.forEach(this.Kc,(function(r){var i=S.C(r);return e.Hc(t,i).next((function(t){t||n.Er(i)}))})).next((function(){return e.Gc=null,n.apply(t)}))},t.prototype.Ir=function(t,e){var n=this;return this.Hc(t,e).next((function(t){t?n.Kc.delete(e.toString()):n.Kc.add(e.toString())}))},t.prototype.xc=function(t){return 0},t.prototype.Hc=function(t,e){var n=this;return ir.xn([function(){return ir.resolve(n.Wc.Lr(e))},function(){return n.persistence.tr().Lr(t,e)},function(){return n.persistence.Bc(t,e)}])},t}(),$i=function(){function t(t){this.Yc=t.Yc,this.Jc=t.Jc}return t.prototype.Io=function(t){this.Xc=t},t.prototype.do=function(t){this.Zc=t},t.prototype.onMessage=function(t){this.ta=t},t.prototype.close=function(){this.Jc()},t.prototype.send=function(t){this.Yc(t)},t.prototype.ea=function(){this.Xc()},t.prototype.na=function(t){this.Zc(t)},t.prototype.sa=function(t){this.ta(t)},t}(),to={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},eo=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n}return r.__extends(e,t),e.prototype.aa=function(t,e,n,r){return new Promise((function(o,s){var u=new i.XhrIo;u.listenOnce(i.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case i.ErrorCode.NO_ERROR:var e=u.getResponseJson();y("Connection","XHR received:",JSON.stringify(e)),o(e);break;case i.ErrorCode.TIMEOUT:y("Connection",'RPC "'+t+'" timed out'),s(new l(a.DEADLINE_EXCEEDED,"Request time out"));break;case i.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(y("Connection",'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var c=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(a).indexOf(e)>=0?e:a.UNKNOWN}(r.status);s(new l(c,r.message))}else s(new l(a.UNKNOWN,"Server responded with status "+u.getStatus()))}else s(new l(a.UNAVAILABLE,"Connection failed."));break;default:E()}}finally{y("Connection",'RPC "'+t+'" completed.')}}));var c=JSON.stringify(r);u.send(e,"POST",c,n,15)}))},e.prototype.Ao=function(t,e){var n=[this.ra,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=i.createWebChannelTransport(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.B.projectId+"/databases/"+this.B.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.ca(s.initMessageHeaders,e),h.isMobileCordova()||h.isReactNative()||h.isElectron()||h.isIE()||h.isUWP()||h.isBrowserExtension()||(s.httpHeadersOverwriteParam="$httpHeaders");var u=n.join("");y("Connection","Creating WebChannel: "+u,s);var o=r.createWebChannel(u,s),c=!1,p=!1,f=new $i({Yc:function(t){p?y("Connection","Not sending because WebChannel is closed:",t):(c||(y("Connection","Opening WebChannel transport."),o.open(),c=!0),y("Connection","WebChannel sending:",t),o.send(t))},Jc:function(){return o.close()}}),d=function(t,e){o.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return d(i.WebChannel.EventType.OPEN,(function(){p||y("Connection","WebChannel transport opened.")})),d(i.WebChannel.EventType.CLOSE,(function(){p||(p=!0,y("Connection","WebChannel transport closed"),f.na())})),d(i.WebChannel.EventType.ERROR,(function(t){p||(p=!0,m("Connection","WebChannel transport errored:",t),f.na(new l(a.UNAVAILABLE,"The operation could not be completed")))})),d(i.WebChannel.EventType.MESSAGE,(function(t){var e;if(!p){var n=t.data[0];g(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){y("Connection","WebChannel received error:",i);var c=i.status,s=function(t){var e=gt[t];if(void 0!==e)return Et(e)}(c),u=i.message;void 0===s&&(s=a.INTERNAL,u="Unknown error status: "+c+" with message "+i.message),p=!0,f.na(new l(s,u)),o.close()}else y("Connection","WebChannel received:",n),f.sa(n)}})),setTimeout((function(){f.ea()}),0),f},e}(function(){function t(t){this.ia=t,this.B=t.B;var e=t.ssl?"https":"http";this.ra=e+"://"+t.host,this.oa="projects/"+this.B.projectId+"/databases/"+this.B.database+"/documents"}return t.prototype.No=function(t,e,n,r){var i=this.ua(t,e);y("RestConnection","Sending: ",i,n);var o={};return this.ca(o,r),this.aa(t,i,o,n).then((function(t){return y("RestConnection","Received: ",t),t}),(function(e){throw m("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$o=function(t,e,n,r){return this.No(t,e,n,r)},t.prototype.ca=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.21.0",t["Content-Type"]="text/plain",e)for(var n in e.Ur)e.Ur.hasOwnProperty(n)&&(t[n]=e.Ur[n])},t.prototype.ua=function(t,e){var n=to[t];return this.ra+"/v1/"+e+":"+n},t}()),no=function(){function t(){var t=this;this.ha=function(){return t.la()},this._a=function(){return t.fa()},this.da=[],this.wa()}return t.prototype.Jo=function(t){this.da.push(t)},t.prototype.ei=function(){window.removeEventListener("online",this.ha),window.removeEventListener("offline",this._a)},t.prototype.wa=function(){window.addEventListener("online",this.ha),window.addEventListener("offline",this._a)},t.prototype.la=function(){y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.da;t<e.length;t++)(0,e[t])(0)},t.prototype.fa=function(){y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.da;t<e.length;t++)(0,e[t])(1)},t.ma=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ro=function(){function t(){}return t.prototype.Jo=function(t){},t.prototype.ei=function(){},t}();function io(t){return new ve(t,!0)}var oo="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",so=function(){function t(){}return t.prototype.initialize=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.Vu=this.Ta(t),this.persistence=this.Ea(t),[4,this.persistence.start()];case 1:return e.sent(),this.Ia=this.Aa(t),this.Qo=this.Ra(t),[2]}}))}))},t.prototype.Aa=function(t){return null},t.prototype.Ra=function(t){return e=this.persistence,n=new Wi,r=t.ya,new Rr(e,n,r);var e,n,r},t.prototype.Ea=function(t){if(t.persistenceSettings.Pa)throw new l(a.FAILED_PRECONDITION,oo);return new Yi(Zi.zc)},t.prototype.Ta=function(t){return new _r},t.prototype.terminate=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.Ia&&this.Ia.stop(),[4,this.Vu.ei()];case 1:return t.sent(),[4,this.persistence.ei()];case 2:return t.sent(),[2]}}))}))},t.prototype.clearPersistence=function(t,e){throw new l(a.FAILED_PRECONDITION,oo)},t}(),uo=function(){function t(){}return t.prototype.initialize=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.Qo?[3,2]:(this.Qo=t.Qo,this.Vu=t.Vu,this.jo=this.pa(e),this.pu=this.ga(e),this.gu=this.Va(e),this.va=this.ba(e),this.Vu.Qs=function(t){return Pi(n.va,t,1)},this.pu.Wo.Sa=Qi.bind(null,this.va),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),e?(n.Ko.delete(2),[4,Jr(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Ko.add(2),[4,Zr(n)]);case 3:r.sent(),n.Xo.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}(this.pu,this.va.Lu)]);case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},t.prototype.Va=function(t){return new lr},t.prototype.pa=function(t){var e,n=io(t.ia.B),r=(e=t.ia,new eo(e));return function(t,e,n){return new Hr(t,e,n)}(t.credentials,r,n)},t.prototype.ga=function(t){var e,n,r,i,o,s=this;return e=this.Qo,n=this.jo,r=t.kn,i=function(t){return Pi(s.va,t,0)},o=no.ma()?new no:new ro,new Yr(e,n,r,i,o)},t.prototype.ba=function(t){return function(t,e,n,r,i,o,s){var u=new Li(t,e,n,r,i,o);return s&&(u.Mu=!0),u}(this.Qo,this.pu,this.gu,this.Vu,t.ya,t.vu,!t.persistenceSettings.Pa||!t.persistenceSettings.synchronizeTabs)},t.prototype.terminate=function(){return $r(this.pu)},t}(),ao=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Ca(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Ca(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Da=function(){this.muted=!0},t.prototype.Ca=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),co=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new l(a.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+H(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(V("FieldPath","string",e,t[e]),0===t[e].length)throw new l(a.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Fa=new k(t)},ho=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return r.__extends(e,t),e.documentId=function(){return new e(k.v().R())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","FieldPath",1,t);return this.Fa.isEqual(t.Fa)},e}(co),fo=new RegExp("[~\\*/\\[\\]]"),lo=function(){this.Na=this},po=function(t){function e(e){var n=this;return(n=t.call(this)||this).$a=e,n}return r.__extends(e,t),e.prototype.xa=function(t){if(2!==t.ka)throw 1===t.ka?t.Oa(this.$a+"() can only appear at the top level of your update data"):t.Oa(this.$a+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(lo);function vo(t,e,n){return new ko({ka:3,Ma:e.settings.Ma,methodName:t.$a,La:n},e.B,e.serializer,e.ignoreUndefinedProperties)}var yo=function(t){function e(e){var n=this;return(n=t.call(this)||this).$a=e,n}return r.__extends(e,t),e.prototype.xa=function(t){return new Je(t.path,new qe)},e.prototype.isEqual=function(t){return t instanceof e},e}(lo),go=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).$a=e,r.qa=n,r}return r.__extends(e,t),e.prototype.xa=function(t){var e=vo(this,t,!0),n=this.qa.map((function(t){return Vo(t,e)})),r=new Be(n);return new Je(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(lo),mo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).$a=e,r.qa=n,r}return r.__extends(e,t),e.prototype.xa=function(t){var e=vo(this,t,!0),n=this.qa.map((function(t){return Vo(t,e)})),r=new ze(n);return new Je(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(lo),wo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).$a=e,r.Ua=n,r}return r.__extends(e,t),e.prototype.xa=function(t){var e=new Ke(t.serializer,me(t.serializer,this.Ua));return new Je(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(lo),bo=function(t){function e(){return t.call(this)||this}return r.__extends(e,t),e.delete=function(){return R("FieldValue.delete",arguments),new Eo(new po("FieldValue.delete"))},e.serverTimestamp=function(){return R("FieldValue.serverTimestamp",arguments),new Eo(new yo("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return P("FieldValue.arrayUnion",arguments,1),new Eo(new go("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return P("FieldValue.arrayRemove",arguments,1),new Eo(new mo("FieldValue.arrayRemove",t))},e.increment=function(t){return V("FieldValue.increment","number",1,t),D("FieldValue.increment",arguments,1),new Eo(new wo("FieldValue.increment",t))},e}(lo),Eo=function(t){function e(e){var n=this;return(n=t.call(this)||this).Na=e,n.$a=e.$a,n}return r.__extends(e,t),e.prototype.xa=function(t){return this.Na.xa(t)},e.prototype.isEqual=function(t){return t instanceof e&&this.Na.isEqual(t.Na)},e}(bo),_o=function(){function t(t,e){if(D("GeoPoint",arguments,2),V("GeoPoint","number",1,t),V("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new l(a.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new l(a.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Ba=t,this.Qa=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Ba},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.Qa},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.Ba===t.Ba&&this.Qa===t.Qa},t.prototype.toJSON=function(){return{latitude:this.Ba,longitude:this.Qa}},t.prototype.H=function(t){return J(this.Ba,t.Ba)||J(this.Qa,t.Qa)},t}(),Io=/^__.*__$/,To=function(t,e,n){this.ja=t,this.Wa=e,this.Ga=n},Ao=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.za=function(t,e){var n=[];return null!==this.Qe?n.push(new cn(t,this.data,this.Qe,e)):n.push(new an(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new fn(t,this.fieldTransforms)),n},t}(),No=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.za=function(t,e){var n=[new cn(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new fn(t,this.fieldTransforms)),n},t}();function Lo(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw E()}}var ko=function(){function t(t,e,n,r,i,o){this.settings=t,this.B=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ka(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ka",{get:function(){return this.settings.ka},enumerable:!1,configurable:!0}),t.prototype.Ha=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.B,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.Ya=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ha({path:n,La:!1});return r.Ja(t),r},t.prototype.Xa=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ha({path:n,La:!1});return r.Ka(),r},t.prototype.Za=function(t){return this.Ha({path:void 0,La:!0})},t.prototype.Oa=function(t){return jo(t,this.settings.methodName,this.settings.th||!1,this.path,this.settings.Ma)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.T(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.T(e.field)}))},t.prototype.Ka=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Ja(this.path.get(t))},t.prototype.Ja=function(t){if(0===t.length)throw this.Oa("Document fields must not be empty");if(Lo(this.ka)&&Io.test(t))throw this.Oa('Document fields cannot begin and end with "__"')},t}(),So=function(){function t(t,e,n){this.B=t,this.ignoreUndefinedProperties=e,this.serializer=n||io(t)}return t.prototype.eh=function(t,e,n,r){return void 0===r&&(r=!1),new ko({ka:t,methodName:e,Ma:n,path:k.p(),La:!1,th:r},this.B,this.serializer,this.ignoreUndefinedProperties)},t}();function Ro(t,e,n,r,i,o){void 0===o&&(o={});var s=t.eh(o.merge||o.mergeFields?2:0,e,n,i);Mo("Data must be an object, but it was:",s,r);var u,c,h=Co(r,s);if(o.merge)u=new Ye(s.Qe),c=s.fieldTransforms;else if(o.mergeFields){for(var f=[],p=0,d=o.mergeFields;p<d.length;p++){var v=d[p],g=void 0;if(v instanceof co)g=v.Fa;else{if("string"!=typeof v)throw E();g=Go(e,v,n)}if(!s.contains(g))throw new l(a.INVALID_ARGUMENT,"Field '"+g+"' is specified in your field mask but missing from your input data.");Fo(f,g)||f.push(g)}u=new Ye(f),c=s.fieldTransforms.filter((function(t){return u.Ke(t.field)}))}else u=null,c=s.fieldTransforms;return new Ao(new yn(h),u,c)}function Do(t,e,n,r){var i=t.eh(1,e,n);Mo("Data must be an object, but it was:",i,r);var o=[],s=new gn;b(r,(function(t,r){var u=Go(e,t,n),a=i.Xa(u);if(r instanceof lo&&r.Na instanceof po)o.push(u);else{var c=Vo(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new Ye(o);return new No(s.Je(),u,i.fieldTransforms)}function Po(t,e,n,r,i,o){var s=t.eh(1,e,n),u=[xo(e,r,n)],c=[i];if(o.length%2!=0)throw new l(a.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<o.length;h+=2)u.push(xo(e,o[h])),c.push(o[h+1]);for(var f=[],p=new gn,d=u.length-1;d>=0;--d)if(!Fo(f,u[d])){var v=u[d],y=c[d],g=s.Xa(v);if(y instanceof lo&&y.Na instanceof po)f.push(v);else{var m=Vo(y,g);null!=m&&(f.push(v),p.set(v,m))}}var w=new Ye(f);return new No(p.Je(),w,s.fieldTransforms)}function Oo(t,e,n,r){return void 0===r&&(r=!1),Vo(n,t.eh(r?4:3,e))}function Vo(t,e){if(Uo(t))return Mo("Unsupported field value:",e,t),Co(t,e);if(t instanceof lo)return function(t,e){if(!Lo(e.ka))throw e.Oa(t.$a+"() can only be used with update() and set()");if(!e.path)throw e.Oa(t.$a+"() is not currently supported inside arrays");var n=t.xa(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.La&&4!==e.ka)throw e.Oa("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Vo(o[i],e.Za(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return me(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ut.fromDate(t);return{timestampValue:we(e.serializer,n)}}if(t instanceof ut){var r=new ut(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:we(e.serializer,r)}}if(t instanceof _o)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tt)return{bytesValue:be(e.serializer,t.U)};if(t instanceof To){var i=e.B,o=t.ja;if(!o.isEqual(i))throw e.Oa("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Ie(t.ja||e.B,t.Wa.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Oa("Unsupported field value: "+q(t))}(t,e)}function Co(t,e){var n={};return T(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):b(t,(function(t,r){var i=Vo(r,e.Ya(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Uo(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ut||t instanceof _o||t instanceof tt||t instanceof To||t instanceof lo)}function Mo(t,e,n){if(!Uo(n)||!F(n)){var r=q(n);throw"an object"===r?e.Oa(t+" a custom object"):e.Oa(t+" "+r)}}function xo(t,e,n){if(e instanceof co)return e.Fa;if("string"==typeof e)return Go(t,e);throw jo("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Go(t,e,n){try{return function(t){if(t.search(fo)>=0)throw new l(a.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ho.bind.apply(ho,r.__spreadArrays([void 0],t.split("."))))}catch(e){throw new l(a.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Fa}catch(e){throw jo((i=e)instanceof Error?i.message:i.toString(),t,!1,void 0,n)}var i}function jo(t,e,n,r,i){var o=r&&!r.m(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var c="";return(o||s)&&(c+=" (found",o&&(c+=" in field "+r),s&&(c+=" in document "+i),c+=")"),new l(a.INVALID_ARGUMENT,(u+=". ")+t+c)}function Fo(t,e){return t.some((function(t){return t.isEqual(e)}))}var qo=function(){function t(t){this.jo=t,this.nh=new Map,this.mutations=[],this.sh=!1,this.ih=null,this.rh=new Set}return t.prototype.oh=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:if(this.uh(),this.mutations.length>0)throw new l(a.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,u,a;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),i=Le(n.serializer)+"/documents",o={documents:e.map((function(t){return Te(n.serializer,t)}))},[4,n.$o("BatchGetDocuments",i,o)];case 1:return s=r.sent(),u=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){g(!!e.found),e.found.name,e.found.updateTime;var n=Ae(t,e.found.name),r=_e(e.found.updateTime),i=new yn({mapValue:{fields:e.found.fields}});return new bn(n,r,i,{})}(t,e):"missing"in e?function(t,e){g(!!e.missing),g(!!e.readTime);var n=Ae(t,e.missing),r=_e(e.readTime);return new En(n,r)}(t,e):E()}(n.serializer,t);u.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=u.get(t.toString());g(!!e),a.push(e)})),a)]}}))}))}(this.jo,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof En||t instanceof bn?n.ah(t):E()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.za(t,this.Ge(t))),this.rh.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.za(t,this.hh(t)))}catch(t){this.ih=t}this.rh.add(t.toString())},t.prototype.delete=function(t){this.write([new dn(t,this.Ge(t))]),this.rh.add(t.toString())},t.prototype.commit=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(this.uh(),this.ih)throw this.ih;return t=this.nh,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=S.C(n);e.mutations.push(new vn(r,e.Ge(r)))})),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),i=Le(n.serializer)+"/documents",o={writes:e.map((function(t){return Se(n.serializer,t)}))},[4,n.No("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.jo,this.mutations)];case 1:return n.sent(),this.sh=!0,[2]}}))}))},t.prototype.ah=function(t){var e;if(t instanceof bn)e=t.version;else{if(!(t instanceof En))throw E();e=at.min()}var n=this.nh.get(t.key.toString());if(n){if(!e.isEqual(n))throw new l(a.ABORTED,"Document version changed between two reads.")}else this.nh.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.nh.get(t.toString());return!this.rh.has(t.toString())&&e?$e.updateTime(e):$e.He()},t.prototype.hh=function(t){var e=this.nh.get(t.toString());if(!this.rh.has(t.toString())&&e){if(e.isEqual(at.min()))throw new l(a.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $e.updateTime(e)}return $e.exists(!0)},t.prototype.write=function(t){this.uh(),this.mutations=this.mutations.concat(t)},t.prototype.uh=function(){},t}(),Bo=function(){function t(t,e,n,r){this.kn=t,this.jo=e,this.updateFunction=n,this.Ln=r,this.lh=5,this.Jn=new tr(this.kn,"transaction_retry")}return t.prototype.run=function(){this._h()},t.prototype._h=function(){var t=this;this.Jn.Rn((function(){return r.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return r.__generator(this,(function(r){return t=new qo(this.jo),(e=this.fh(t))&&e.then((function(e){n.kn.Qn((function(){return t.commit().then((function(){n.Ln.resolve(e)})).catch((function(t){n.dh(t)}))}))})).catch((function(t){n.dh(t)})),[2]}))}))}))},t.prototype.fh=function(t){try{var e=this.updateFunction(t);return!ct(e)&&e.catch&&e.then?e:(this.Ln.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ln.reject(t),null}},t.prototype.dh=function(t){var e=this;this.lh>0&&this.wh(t)?(this.lh-=1,this.kn.Qn((function(){return e._h(),Promise.resolve()}))):this.Ln.reject(t)},t.prototype.wh=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!bt(e)}return!1},t}(),Qo=function(){function t(t,e){this.credentials=t,this.kn=e,this.clientId=Y.k(),this.mh=new rr}return t.prototype.start=function(t,e,n,i){var o=this;this.Th(),this.ia=t;var s=new rr,u=!1;return this.credentials.jr((function(t){if(!u)return u=!0,y("FirestoreClient","Initializing. user=",t.uid),o.Eh(e,n,i,t,s).then(o.mh.resolve,o.mh.reject);o.kn.rs((function(){return function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=_(t)).kn.cs(),y("RemoteStore","RemoteStore received new credentials"),i=si(n),n.Ko.add(3),[4,Zr(n)];case 1:return r.sent(),i&&n.Xo.set("Unknown"),[4,n.Wo.Sa(e)];case 2:return r.sent(),n.Ko.delete(3),[4,Jr(n)];case 3:return r.sent(),[2]}}))}))}(o.pu,t)}))})),this.kn.Qn((function(){return o.mh.promise})),s.promise},t.prototype.enableNetwork=function(){var t=this;return this.Th(),this.kn.enqueue((function(){return t.persistence.Mc(!0),function(t){var e=_(t);return e.Ko.delete(0),Jr(e)}(t.pu)}))},t.prototype.Eh=function(t,e,n,i,o){return r.__awaiter(this,void 0,void 0,(function(){var s,u,a=this;return r.__generator(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),s={kn:this.kn,ia:this.ia,clientId:this.clientId,credentials:this.credentials,ya:i,vu:100,persistenceSettings:n},[4,t.initialize(s)];case 1:return c.sent(),[4,e.initialize(t,s)];case 2:return c.sent(),this.persistence=t.persistence,this.Vu=t.Vu,this.Qo=t.Qo,this.Ia=t.Ia,this.jo=e.jo,this.pu=e.pu,this.va=e.va,this.Ih=e.gu,this.Ih.Es=ki.bind(null,this.va),this.Ih.Rs=Si.bind(null,this.va),this.persistence.Oc((function(){return r.__awaiter(a,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),o.resolve(),[3,4];case 3:if(u=c.sent(),o.reject(u),!this.Ah(u))throw u;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),this.Eh(new so,new uo,{Pa:!1},i,o))];case 4:return[2]}}))}))},t.prototype.Ah=function(t){return"FirebaseError"===t.name?t.code===a.FAILED_PRECONDITION||t.code===a.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Th=function(){if(this.kn.Zn)throw new l(a.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.Th(),this.kn.enqueue((function(){return t.persistence.Mc(!1),function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=_(t)).Ko.add(0),[4,Zr(e)];case 1:return n.sent(),e.Xo.set("Offline"),[2]}}))}))}(t.pu)}))},t.prototype.terminate=function(){var t=this;this.kn.ss();var e=new rr;return this.kn.ts((function(){return r.__awaiter(t,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.Ia&&this.Ia.stop(),[4,$r(this.pu)];case 1:return r.sent(),[4,this.Vu.ei()];case 2:return r.sent(),[4,this.persistence.ei()];case 3:return r.sent(),this.credentials.Wr(),e.resolve(),[3,5];case 4:return t=r.sent(),n=cr(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.Th();var e=new rr;return this.kn.Qn((function(){return function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:si((n=_(t)).pu)||y("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=_(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.hi.zu(t)}))}(n.Qo)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.ku.get(i)||[]).push(e),n.ku.set(i,o),[3,4]);case 3:return s=r.sent(),u=cr(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(u),[3,4];case 4:return[2]}}))}))}(t.va,e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.Th();var i=new ao(n),o=new gr(t,i,e);return this.kn.Qn((function(){return pr(r.Ih,o)})),function(){i.Da(),r.kn.Qn((function(){return hr(r.Ih,o)}))}},t.prototype.Rh=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.Th(),[4,this.mh.promise];case 1:return i.sent(),e=new rr,[2,(this.kn.Qn((function(){return function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=_(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.er._i(t,e)}))}(t,e)];case 1:return(i=r.sent())instanceof bn?n.resolve(i):i instanceof En?n.resolve(null):n.reject(new l(a.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=r.sent(),s=cr(o,"Failed to get document '"+e+" from cache"),n.reject(s),[3,3];case 3:return[2]}}))}))}(n.Qo,t,e)})),e.promise)]}}))}))},t.prototype.yh=function(t,e){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.Th(),[4,this.mh.promise];case 1:return r.sent(),n=new rr,[2,(this.kn.Qn((function(){return function(t,e,n,r,i){var o=new ao({next:function(o){e.Qn((function(){return hr(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new l(a.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new l(a.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new gr(Tn(n.path),o,{includeMetadataChanges:!0,bs:!0});return pr(t,s)}(i.Ih,i.kn,t,e,n)})),n.promise)]}}))}))},t.prototype.Ph=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.Th(),[4,this.mh.promise];case 1:return i.sent(),e=new rr,[2,(this.kn.Qn((function(){return function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,u,a,c;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Ur(t,e,!0)];case 1:return i=r.sent(),o=new Ti(e,i.gr),s=o._u(i.documents),u=o.mu(s,!1),n.resolve(u.snapshot),[3,3];case 2:return a=r.sent(),c=cr(a,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}}))}))}(n.Qo,t,e)})),e.promise)]}}))}))},t.prototype.ph=function(t,e){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.Th(),[4,this.mh.promise];case 1:return r.sent(),n=new rr,[2,(this.kn.Qn((function(){return function(t,e,n,r,i){var o=new ao({next:function(n){e.Qn((function(){return hr(t,s)})),n.fromCache&&"server"===r.source?i.reject(new l(a.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new gr(n,o,{includeMetadataChanges:!0,bs:!0});return pr(t,s)}(i.Ih,i.kn,t,e,n)})),n.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.Th();var n=new rr;return this.kn.Qn((function(){return Ri(e.va,t,n)})),n.promise},t.prototype.B=function(){return this.ia.B},t.prototype.gh=function(t){var e=this;this.Th();var n=new ao(t);return this.kn.Qn((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,function(t,e){_(t).Ts.add(e),e.next()}(this.Ih,n)]}))}))})),function(){n.Da(),e.kn.Qn((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,function(t,e){_(t).Ts.delete(e)}(this.Ih,n)]}))}))}))}},Object.defineProperty(t.prototype,"Vh",{get:function(){return this.kn.Zn},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Th();var n=new rr;return this.kn.Qn((function(){return new Bo(e.kn,e.jo,t,n).run(),Promise.resolve()})),n.promise},t}();function zo(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Wo=function(){function t(t,e,n,r,i){this.B=t,this.timestampsInSnapshots=e,this.bh=n,this.Sh=r,this.Ch=i}return t.prototype.Dh=function(t){switch(Zt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return oe(t.integerValue||t.doubleValue);case 3:return this.Fh(t.timestampValue);case 4:return this.Nh(t);case 5:return t.stringValue;case 6:return this.Ch(se(t.bytesValue));case 7:return this.$h(t.referenceValue);case 8:return this.xh(t.geoPointValue);case 9:return this.kh(t.arrayValue);case 10:return this.Oh(t.mapValue);default:throw E()}},t.prototype.Oh=function(t){var e=this,n={};return b(t.fields||{},(function(t,r){n[t]=e.Dh(r)})),n},t.prototype.xh=function(t){return new _o(oe(t.latitude),oe(t.longitude))},t.prototype.kh=function(t){var e=this;return(t.values||[]).map((function(t){return e.Dh(t)}))},t.prototype.Nh=function(t){switch(this.bh){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Xt(n)?t(n):n}(t);return null==e?null:this.Dh(e);case"estimate":return this.Fh(Yt(t));default:return null}},t.prototype.Fh=function(t){var e=ie(t),n=new ut(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.$h=function(t){var e=N.P(t);g(Me(e));var n=new st(e.get(1),e.get(3)),r=new S(e.u(5));return n.isEqual(this.B)||p("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.B.projectId+"/"+this.B.database+") instead."),this.Sh(r)},t}(),Ko=Nr.ki,Ho=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new l(a.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else U("settings","non-empty string","host",t.host),this.host=t.host,M("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Q("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),M("settings","object","credentials",t.credentials),this.credentials=t.credentials,M("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),M("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?p("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&p("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,M("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Nr.Mi;else{if(t.cacheSizeBytes!==Ko&&t.cacheSizeBytes<Nr.Oi)throw new l(a.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Nr.Oi);this.cacheSizeBytes=t.cacheSizeBytes}M("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Xo=function(){function t(e,n,i,o){var s=this;if(void 0===i&&(i=new so),void 0===o&&(o=new uo),this.Mh=i,this.Lh=o,this.qh=null,this.Uh=new ar,this.INTERNAL={delete:function(){return r.__awaiter(s,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.Bh(),[4,this.Qh.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var u=e;this.qh=u,this.ja=t.jh(u),this.Wh=u.name,this.Gh=new qr(n)}else{var c=e;if(!c.projectId)throw new l(a.INVALID_ARGUMENT,"Must provide projectId");this.ja=new st(c.projectId,c.database),this.Wh="[DEFAULT]",this.Gh=new Fr}this.zh=new Ho({})}return Object.defineProperty(t.prototype,"Kh",{get:function(){return this.Hh||(this.Hh=new So(this.ja,this.zh.ignoreUndefinedProperties)),this.Hh},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){D("Firestore.settings",arguments,1),V("Firestore.settings","object",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.zh),t)).merge;var e=new Ho(t);if(this.Qh&&!this.zh.isEqual(e))throw new l(a.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.zh=e,void 0!==e.credentials&&(this.Gh=function(t){if(!t)return new Fr;switch(t.type){case"gapi":var e=t.Yh;return g(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Qr(e,t.Jr||"0");case"provider":return t.Yh;default:throw new l(a.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.Bh(),this.Qh.enableNetwork()},t.prototype.disableNetwork=function(){return this.Bh(),this.Qh.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.Qh)throw new l(a.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&p("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new l(a.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Jh(this.Mh,this.Lh,{Pa:!0,cacheSizeBytes:this.zh.cacheSizeBytes,synchronizeTabs:r,Xh:i})},t.prototype.clearPersistence=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){if(void 0!==this.Qh&&!this.Qh.Vh)throw new l(a.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new rr,[2,(this.Uh.ts((function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.Mh.clearPersistence(this.ja,this.Wh)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return e=n.sent(),t.reject(e),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Zh",{get:function(){return this.Bh(),this.Qh.Vh},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Bh(),this.Qh.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.Bh(),zo(t))return this.Qh.gh(t);V("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.Qh.gh(e)},t.prototype.Bh=function(){return this.Qh||this.Jh(new so,new uo,{Pa:!1}),this.Qh},t.prototype.tl=function(){return new ot(this.ja,this.Wh,this.zh.host,this.zh.ssl,this.zh.experimentalForceLongPolling)},t.prototype.Jh=function(t,e,n){var r=this.tl();return this.Qh=new Qo(this.Gh,this.Uh),this.Qh.start(r,t,e,n)},t.jh=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new l(a.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new l(a.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new st(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.qh)throw new l(a.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.qh},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return D("Firestore.collection",arguments,1),V("Firestore.collection","non-empty string",1,t),this.Bh(),new hs(N.P(t),this,null)},t.prototype.doc=function(t){return D("Firestore.doc",arguments,1),V("Firestore.doc","non-empty string",1,t),this.Bh(),Zo.el(N.P(t),this,null)},t.prototype.collectionGroup=function(t){if(D("Firestore.collectionGroup",arguments,1),V("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new l(a.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Bh(),new as(function(t){return new In(N.p(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return D("Firestore.runTransaction",arguments,1),V("Firestore.runTransaction","function",1,t),this.Bh().transaction((function(n){return t(new Yo(e,n))}))},t.prototype.batch=function(){return this.Bh(),new Jo(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(v()){case c.LogLevel.DEBUG:return"debug";case c.LogLevel.ERROR:return"error";case c.LogLevel.SILENT:return"silent";case c.LogLevel.WARN:return"warn";case c.LogLevel.INFO:return"info";case c.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;D("Firestore.setLogLevel",arguments,1),G("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,d.setLogLevel(e)},t.prototype.nl=function(){return this.zh.timestampsInSnapshots},t.prototype.sl=function(){return this.zh},t}(),Yo=function(){function t(t,e){this.il=t,this.rl=e}return t.prototype.get=function(t){var e=this;D("Transaction.get",arguments,1);var n=ds("Transaction.get",t,this.il);return this.rl.oh([n.Wa]).then((function(t){if(!t||1!==t.length)return E();var r=t[0];if(r instanceof En)return new ts(e.il,n.Wa,null,!1,!1,n.Ga);if(r instanceof bn)return new ts(e.il,n.Wa,r,!1,!1,n.Ga);throw E()}))},t.prototype.set=function(t,e,n){O("Transaction.set",arguments,2,3);var r=ds("Transaction.set",t,this.il);n=fs("Transaction.set",n);var i=ys(r.Ga,e,n),o=Ro(this.il.Kh,"Transaction.set",r.Wa,i,null!==r.Ga,n);return this.rl.set(r.Wa,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof ho?(P("Transaction.update",arguments,3),r=ds("Transaction.update",t,this.il),i=Po(this.il.Kh,"Transaction.update",r.Wa,e,n,o)):(D("Transaction.update",arguments,2),r=ds("Transaction.update",t,this.il),i=Do(this.il.Kh,"Transaction.update",r.Wa,e)),this.rl.update(r.Wa,i),this},t.prototype.delete=function(t){D("Transaction.delete",arguments,1);var e=ds("Transaction.delete",t,this.il);return this.rl.delete(e.Wa),this},t}(),Jo=function(){function t(t){this.il=t,this.ol=[],this.ul=!1}return t.prototype.set=function(t,e,n){O("WriteBatch.set",arguments,2,3),this.cl();var r=ds("WriteBatch.set",t,this.il);n=fs("WriteBatch.set",n);var i=ys(r.Ga,e,n),o=Ro(this.il.Kh,"WriteBatch.set",r.Wa,i,null!==r.Ga,n);return this.ol=this.ol.concat(o.za(r.Wa,$e.He())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.cl(),"string"==typeof e||e instanceof ho?(P("WriteBatch.update",arguments,3),r=ds("WriteBatch.update",t,this.il),i=Po(this.il.Kh,"WriteBatch.update",r.Wa,e,n,o)):(D("WriteBatch.update",arguments,2),r=ds("WriteBatch.update",t,this.il),i=Do(this.il.Kh,"WriteBatch.update",r.Wa,e)),this.ol=this.ol.concat(i.za(r.Wa,$e.exists(!0))),this},t.prototype.delete=function(t){D("WriteBatch.delete",arguments,1),this.cl();var e=ds("WriteBatch.delete",t,this.il);return this.ol=this.ol.concat(new dn(e.Wa,$e.He())),this},t.prototype.commit=function(){return this.cl(),this.ul=!0,this.ol.length>0?this.il.Bh().write(this.ol):Promise.resolve()},t.prototype.cl=function(){if(this.ul)throw new l(a.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Zo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ja,e,r)||this).Wa=e,i.firestore=n,i.Ga=r,i.Qh=i.firestore.Bh(),i}return r.__extends(e,t),e.el=function(t,n,r){if(t.length%2!=0)throw new l(a.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.R()+" has "+t.length);return new e(new S(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.Wa.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new hs(this.Wa.path.h(),this.firestore,this.Ga)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Wa.path.R()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(D("DocumentReference.collection",arguments,1),V("DocumentReference.collection","non-empty string",1,t),!t)throw new l(a.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=N.P(t);return new hs(this.Wa.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.Wa.isEqual(t.Wa)&&this.Ga===t.Ga},e.prototype.set=function(t,e){O("DocumentReference.set",arguments,1,2),e=fs("DocumentReference.set",e);var n=ys(this.Ga,t,e),r=Ro(this.firestore.Kh,"DocumentReference.set",this.Wa,n,null!==this.Ga,e);return this.Qh.write(r.za(this.Wa,$e.He()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof ho?(P("DocumentReference.update",arguments,2),n=Po(this.firestore.Kh,"DocumentReference.update",this.Wa,t,e,r)):(D("DocumentReference.update",arguments,1),n=Do(this.firestore.Kh,"DocumentReference.update",this.Wa,t)),this.Qh.write(n.za(this.Wa,$e.exists(!0)))},e.prototype.delete=function(){return D("DocumentReference.delete",arguments,0),this.Qh.write([new dn(this.Wa,$e.He())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];O("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||zo(i[u])||(Q("DocumentReference.onSnapshot",s=i[u],["includeMetadataChanges"]),M("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),u++);var a={includeMetadataChanges:s.includeMetadataChanges};if(zo(i[u])){var c=i[u];i[u]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[u+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[u+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else V("DocumentReference.onSnapshot","function",u,i[u]),C("DocumentReference.onSnapshot","function",u+1,i[u+1]),C("DocumentReference.onSnapshot","function",u+2,i[u+2]);var h={next:function(t){i[u]&&i[u](r.al(t))},error:i[u+1],complete:i[u+2]};return this.Qh.listen(Tn(this.Wa.path),a,h)},e.prototype.get=function(t){var e=this;O("DocumentReference.get",arguments,0,1),ps("DocumentReference.get",t);var n=this.firestore.Bh();return t&&"cache"===t.source?n.Rh(this.Wa).then((function(t){return new ts(e.firestore,e.Wa,t,!0,t instanceof bn&&t.Ye,e.Ga)})):n.yh(this.Wa,t).then((function(t){return e.al(t)}))},e.prototype.withConverter=function(t){return new e(this.Wa,this.firestore,t)},e.prototype.al=function(t){var e=t.docs.get(this.Wa);return new ts(this.firestore,this.Wa,e,t.fromCache,t.hasPendingWrites,this.Ga)},e}(To),$o=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ts=function(){function t(t,e,n,r,i,o){this.il=t,this.Wa=e,this.hl=n,this.ll=r,this._l=i,this.Ga=o}return t.prototype.data=function(t){var e=this;if(O("DocumentSnapshot.data",arguments,0,1),t=ls("DocumentSnapshot.data",t),this.hl){if(this.Ga){var n=new es(this.il,this.Wa,this.hl,this.ll,this._l,null);return this.Ga.fromFirestore(n,t)}return new Wo(this.il.ja,this.il.nl(),t.serverTimestamps||"none",(function(t){return new Zo(t,e.il,null)}),(function(t){return new it(t)})).Dh(this.hl.sn())}},t.prototype.get=function(t,e){var n=this;if(O("DocumentSnapshot.get",arguments,1,2),e=ls("DocumentSnapshot.get",e),this.hl){var r=this.hl.data().field(xo("DocumentSnapshot.get",t,this.Wa));if(null!==r)return new Wo(this.il.ja,this.il.nl(),e.serverTimestamps||"none",(function(t){return new Zo(t,n.il,n.Ga)}),(function(t){return new it(t)})).Dh(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.Wa.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Zo(this.Wa,this.il,this.Ga)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.hl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new $o(this._l,this.ll)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","DocumentSnapshot",1,e);return this.il===e.il&&this.ll===e.ll&&this.Wa.isEqual(e.Wa)&&(null===this.hl?null===e.hl:this.hl.isEqual(e.hl))&&this.Ga===e.Ga},t}(),es=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(ts);function ns(t,e,n,r,i,o,s){var u;if(i.V()){if("array-contains"===o||"array-contains-any"===o)throw new l(a.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){os(s,o);for(var c=[],h=0,f=s;h<f.length;h++){var p=f[h];c.push(is(r,t,p))}u={arrayValue:{values:c}}}else u=is(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||os(s,o),u=Oo(n,e,s,"in"===o||"not-in"===o);var d=jn.create(i,o,u);return function(t,e){if(e.an()){var n=kn(t);if(null!==n&&!n.isEqual(e.field))throw new l(a.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ln(t);null!==r&&ss(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new l(a.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new l(a.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,d),d}function rs(t,e,n){if(null!==t.startAt)throw new l(a.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new l(a.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new $n(e,n);return function(t,e){if(null===Ln(t)){var n=kn(t);null!==n&&ss(t,n,e.field)}}(t,r),r}function is(t,e,n){if("string"==typeof n){if(""===n)throw new l(a.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sn(e)&&-1!==n.indexOf("/"))throw new l(a.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(N.P(n));if(!S.N(r))throw new l(a.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ue(t,new S(r))}if(n instanceof To)return ue(t,n.Wa);throw new l(a.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+q(n)+".")}function os(t,e){if(!Array.isArray(t)||0===t.length)throw new l(a.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new l(a.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(t.indexOf(null)>=0)throw new l(a.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new l(a.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function ss(t,e,n){if(!n.isEqual(e))throw new l(a.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function us(t){if(Nn(t)&&0===t.rn.length)throw new l(a.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var as=function(){function t(t,e,n){this.fl=t,this.firestore=e,this.Ga=n}return t.prototype.where=function(e,n,r){D("Query.where",arguments,3),B("Query.where",3,r);var i=G("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,n),o=xo("Query.where",e),s=ns(this.fl,"Query.where",this.firestore.Kh,this.firestore.ja,o,i,r);return new t(function(t,e){var n=t.filters.concat([e]);return new In(t.path,t.collectionGroup,t.rn.slice(),n,t.limit,t.on,t.startAt,t.endAt)}(this.fl,s),this.firestore,this.Ga)},t.prototype.orderBy=function(e,n){var r;if(O("Query.orderBy",arguments,1,2),C("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new l(a.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=xo("Query.orderBy",e),o=rs(this.fl,i,r);return new t(function(t,e){var n=t.rn.concat([e]);return new In(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.on,t.startAt,t.endAt)}(this.fl,o),this.firestore,this.Ga)},t.prototype.limit=function(e){return D("Query.limit",arguments,1),V("Query.limit","number",1,e),W("Query.limit",1,e),new t(Pn(this.fl,e,"F"),this.firestore,this.Ga)},t.prototype.limitToLast=function(e){return D("Query.limitToLast",arguments,1),V("Query.limitToLast","number",1,e),W("Query.limitToLast",1,e),new t(Pn(this.fl,e,"L"),this.firestore,this.Ga)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];P("Query.startAt",arguments,1);var i=this.dl("Query.startAt",e,n,!0);return new t(On(this.fl,i),this.firestore,this.Ga)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];P("Query.startAfter",arguments,1);var i=this.dl("Query.startAfter",e,n,!1);return new t(On(this.fl,i),this.firestore,this.Ga)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];P("Query.endBefore",arguments,1);var i=this.dl("Query.endBefore",e,n,!0);return new t(Vn(this.fl,i),this.firestore,this.Ga)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];P("Query.endAt",arguments,1);var i=this.dl("Query.endAt",e,n,!1);return new t(Vn(this.fl,i),this.firestore,this.Ga)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","Query",1,e);return this.firestore===e.firestore&&Cn(this.fl,e.fl)&&this.Ga===e.Ga},t.prototype.withConverter=function(e){return new t(this.fl,this.firestore,e)},t.prototype.dl=function(t,e,n,i){if(B(t,1,e),e instanceof ts)return D(t,r.__spreadArrays([e],n),1),function(t,e,n,r,i){if(!r)throw new l(a.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=Rn(t);s<u.length;s++){var c=u[s];if(c.field.V())o.push(ue(e,r.key));else{var h=r.field(c.field);if(Xt(h))throw new l(a.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=c.field.R();throw new l(a.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(h)}}return new Xn(o,i)}(this.fl,this.firestore.ja,t,e.hl,i);var o=[e].concat(n);return function(t,e,n,r,i,o){var s=t.rn;if(i.length>s.length)throw new l(a.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],c=0;c<i.length;c++){var h=i[c];if(s[c].field.V()){if("string"!=typeof h)throw new l(a.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!Sn(t)&&-1!==h.indexOf("/"))throw new l(a.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=t.path.child(N.P(h));if(!S.N(f))throw new l(a.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var p=new S(f);u.push(ue(e,p))}else{var d=Oo(n,r,h);u.push(d)}}return new Xn(u,o)}(this.fl,this.firestore.ja,this.firestore.Kh,t,o,i)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];O("Query.onSnapshot",arguments,1,4);var s={},u=0;if("object"!=typeof i[u]||zo(i[u])||(Q("Query.onSnapshot",s=i[u],["includeMetadataChanges"]),M("Query.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),u++),zo(i[u])){var a=i[u];i[u]=null===(t=a.next)||void 0===t?void 0:t.bind(a),i[u+1]=null===(e=a.error)||void 0===e?void 0:e.bind(a),i[u+2]=null===(n=a.complete)||void 0===n?void 0:n.bind(a)}else V("Query.onSnapshot","function",u,i[u]),C("Query.onSnapshot","function",u+1,i[u+1]),C("Query.onSnapshot","function",u+2,i[u+2]);var c={next:function(t){i[u]&&i[u](new cs(r.firestore,r.fl,t,r.Ga))},error:i[u+1],complete:i[u+2]};return us(this.fl),this.firestore.Bh().listen(this.fl,s,c)},t.prototype.get=function(t){var e=this;O("Query.get",arguments,0,1),ps("Query.get",t),us(this.fl);var n=this.firestore.Bh();return(t&&"cache"===t.source?n.Ph(this.fl):n.ph(this.fl,t)).then((function(t){return new cs(e.firestore,e.fl,t,e.Ga)}))},t}(),cs=function(){function t(t,e,n,r){this.il=t,this.wl=e,this.ml=n,this.Ga=r,this.Tl=null,this.El=null,this.metadata=new $o(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.ml.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ml.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;O("QuerySnapshot.forEach",arguments,1,2),V("QuerySnapshot.forEach","function",1,t),this.ml.docs.forEach((function(r){t.call(e,n.Il(r,n.metadata.fromCache,n.ml.Qt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new as(this.wl,this.il,this.Ga)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(Q("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),M("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.ml.Wt)throw new l(a.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Tl&&this.El===e||(this.Tl=function(t,e,n){if(t.Bt.m()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Qt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Bt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:vs(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.ml,e,this.Il.bind(this)),this.El=e),this.Tl},t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","QuerySnapshot",1,e);return this.il===e.il&&Cn(this.wl,e.wl)&&this.ml.isEqual(e.ml)&&this.Ga===e.Ga},t.prototype.Il=function(t,e,n){return new es(this.il,t.key,t,e,n,this.Ga)},t}(),hs=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Tn(e),n,r)||this).Al=e,e.length%2!=1)throw new l(a.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.R()+" has "+e.length);return i}return r.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.fl.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.fl.path.h();return t.m()?null:new Zo(new S(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.fl.path.R()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){O("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Y.k()),V("CollectionReference.doc","non-empty string",1,t);var e=N.P(t);return Zo.el(this.fl.path.child(e),this.firestore,this.Ga)},e.prototype.add=function(t){D("CollectionReference.add",arguments,1);var e=this.Ga?this.Ga.toFirestore(t):t;V("CollectionReference.add","object",1,e);var n=this.doc();return new Zo(n.Wa,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Al,this.firestore,t)},e}(as);function fs(t,e){if(void 0===e)return{merge:!1};if(Q(t,e,["merge","mergeFields"]),M(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new l(a.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+q(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new l(a.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+q(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof ho}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new l(a.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ls(t,e){return void 0===e?{}:(Q(t,e,["serverTimestamps"]),x(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function ps(t,e){C(t,"object",1,e),e&&(Q(t,e,["source"]),x(t,0,"source",e.source,["default","server","cache"]))}function ds(t,e,n){if(e instanceof To){if(e.firestore!==n)throw new l(a.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw z(t,"DocumentReference",1,e)}function vs(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return E()}}function ys(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var gs={Firestore:Xo,GeoPoint:_o,Timestamp:ut,Blob:it,Transaction:Yo,WriteBatch:Jo,DocumentReference:Zo,DocumentSnapshot:ts,Query:as,QueryDocumentSnapshot:es,QuerySnapshot:cs,CollectionReference:hs,FieldPath:ho,FieldValue:bo,setLogLevel:Xo.setLogLevel,CACHE_SIZE_UNLIMITED:Ko};function ms(t){!function(t,e){t.INTERNAL.registerComponent(new f.Component("firestore",(function(t){return function(t,e){return new Xo(t,e,new so,new uo)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},gs)))}(t),t.registerVersion("@firebase/firestore","1.17.0")}ms(u.default),e.__PRIVATE_registerFirestore=ms},543:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"ErrorCode",(function(){return sr})),n.d(e,"EventType",(function(){return ur})),n.d(e,"WebChannel",(function(){return ar})),n.d(e,"XhrIo",(function(){return cr})),n.d(e,"createWebChannelTransport",(function(){return or}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}var g,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},h=h||{},f=c||self;function l(){}function d(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"}function v(a){var b=d(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var m="closure_uid_"+(1e9*Math.random()>>>0),w=0;function E(a,b,t){return a.call.apply(a.bind,arguments)}function _(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function p(a,b,t){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?E:_).apply(null,arguments)}function I(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}var q=Date.now;function T(a,b){function t(){}t.prototype=b.prototype,a.S=b.prototype,a.prototype=new t,a.prototype.constructor=a}function u(){this.j=this.j,this.i=this.i}u.prototype.j=!1,u.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(a){Object.prototype.hasOwnProperty.call(a,m)&&a[m]||(a[m]=++w)})(this)},u.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var A=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"==typeof a)return"string"!=typeof b||1!=b.length?-1:a.indexOf(b,0);for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},N=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n="string"==typeof a?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};function L(a){return Array.prototype.concat.apply([],arguments)}function k(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}function S(a){return/^[\s\xa0]*$/.test(a)}var R,D=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function P(a,b){return-1!=a.indexOf(b)}function O(a,b){return a<b?-1:a>b?1:0}t:{var V=f.navigator;if(V){var C=V.userAgent;if(C){R=C;break t}}R=""}function U(a,b,t){for(var e in a)b.call(t,a[e],e,a)}function M(a){var b={};for(var t in a)b[t]=a[t];return b}var x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<x.length;r++)t=x[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function j(a){return j[" "](a),a}j[" "]=l;var F,a,B=P(R,"Opera"),Q=P(R,"Trident")||P(R,"MSIE"),z=P(R,"Edge"),W=z||Q,K=P(R,"Gecko")&&!(P(R.toLowerCase(),"webkit")&&!P(R,"Edge"))&&!(P(R,"Trident")||P(R,"MSIE"))&&!P(R,"Edge"),H=P(R.toLowerCase(),"webkit")&&!P(R,"Edge");function X(){var a=f.document;return a?a.documentMode:void 0}t:{var Y="",J=(a=R,K?/rv:([^\);]+)(\)|;)/.exec(a):z?/Edge\/([\d\.]+)/.exec(a):Q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):H?/WebKit\/(\S+)/.exec(a):B?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(J&&(Y=J?J[1]:""),Q){var Z=X();if(null!=Z&&Z>parseFloat(Y)){F=String(Z);break t}}F=Y}var $,tt={};function et(a){return function(a,b){var t=tt;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=D(String(F)).split("."),e=D(String(a)).split("."),n=Math.max(t.length,e.length),r=0;0==b&&r<n;r++){var o=t[r]||"",c=e[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;b=O(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||O(0==o[2].length,0==c[2].length)||O(o[2],c[2]),o=o[3],c=c[3]}while(0==b)}return 0<=b}))}if(f.document&&Q){var nt=X();$=nt||(parseInt(F,10)||void 0)}else $=void 0;var it=$,ot=!Q||9<=Number(it),st=Q&&!et("9"),ut=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{f.addEventListener("test",l,b),f.removeEventListener("test",l,b)}catch(t){}return a}();function at(a,b){this.type=a,this.a=this.target=b,this.defaultPrevented=!1}function ct(a,b){if(at.call(this,a?a.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.a=b,b=a.relatedTarget){if(K){t:{try{j(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:ht[a.pointerType]||"",this.c=a,a.defaultPrevented&&this.b()}}at.prototype.b=function(){this.defaultPrevented=!0},T(ct,at);var ht={2:"touch",3:"pen",4:"mouse"};ct.prototype.b=function(){ct.S.b.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,st)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}};var ft="closure_listenable_"+(1e6*Math.random()|0),lt=0;function pt(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.ca=n,this.key=++lt,this.Y=this.Z=!1}function vt(a){a.Y=!0,a.listener=null,a.proxy=null,a.src=null,a.ca=null}function yt(a){this.src=a,this.a={},this.b=0}function gt(a,b){var t=b.type;if(t in a.a){var e,n=a.a[t],r=A(n,b);(e=0<=r)&&Array.prototype.splice.call(n,r,1),e&&(vt(b),0==a.a[t].length&&(delete a.a[t],a.b--))}}function mt(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.Y&&r.listener==b&&r.capture==!!t&&r.ca==e)return n}return-1}yt.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var o=mt(a,b,e,n);return-1<o?(b=a[o],t||(b.Z=!1)):((b=new pt(b,this.src,r,!!e,n)).Z=t,a.push(b)),b};var wt="closure_lm_"+(1e6*Math.random()|0),bt={};function Et(a,b,t,e,n){if(e&&e.once)return function t(a,b,e,n,r){if(Array.isArray(b)){for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);return null}return e=St(e),a&&a[ft]?a.wa(b,e,y(n)?!!n.capture:!!n,r):_t(a,b,e,!0,n,r)}(a,b,t,e,n);if(Array.isArray(b)){for(var r=0;r<b.length;r++)Et(a,b[r],t,e,n);return null}return t=St(t),a&&a[ft]?a.va(b,t,y(e)?!!e.capture:!!e,n):_t(a,b,t,!1,e,n)}function _t(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var o=y(n)?!!n.capture:!!n;if(o&&!ot)return null;var c=Lt(a);if(c||(a[wt]=c=new yt(a)),(t=c.add(b,t,e,o,r)).proxy)return t;if(e=function(){var a=Nt,b=ot?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)ut||(n=o),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(Tt(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}return t}function It(a){if("number"!=typeof a&&a&&!a.Y){var b=a.src;if(b&&b[ft])gt(b.c,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(Tt(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=Lt(b))?(gt(t,a),0==t.b&&(t.src=null,b[wt]=null)):vt(a)}}}function Tt(a){return a in bt?bt[a]:bt[a]="on"+a}function At(a,b){var t=a.listener,e=a.ca||a.src;return a.Z&&It(a),t.call(e,b)}function Nt(a,b){if(a.Y)return!0;if(!ot){if(!b)t:{b=["window","event"];for(var t=f,e=0;e<b.length;e++)if(null==(t=t[b[e]])){b=null;break t}b=t}return At(a,b=new ct(b,this))}return At(a,new ct(b,this))}function Lt(a){return(a=a[wt])instanceof yt?a:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(a){return"function"==d(a)?a:(a[kt]||(a[kt]=function(b){return a.handleEvent(b)}),a[kt])}function Rt(){u.call(this),this.c=new yt(this),this.J=this,this.C=null}function Dt(a,b,t,e){if(!(b=a.c.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var o=b[r];if(o&&!o.Y&&o.capture==t){var c=o.listener,h=o.ca||o.src;o.Z&&gt(a.c,o),n=!1!==c.call(h,e)&&n}}return n&&!e.defaultPrevented}T(Rt,u),Rt.prototype[ft]=!0,(g=Rt.prototype).addEventListener=function(a,b,t,e){Et(this,a,b,t,e)},g.removeEventListener=function(a,b,t,e){!function t(a,b,e,n,r){if(Array.isArray(b))for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);else n=y(n)?!!n.capture:!!n,e=St(e),a&&a[ft]?(a=a.c,(b=String(b).toString())in a.a&&(-1<(e=mt(o=a.a[b],e,n,r))&&(vt(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete a.a[b],a.b--)))):a&&(a=Lt(a))&&(b=a.a[b.toString()],a=-1,b&&(a=mt(b,e,n,r)),(e=-1<a?b[a]:null)&&It(e))}(this,a,b,t,e)},g.dispatchEvent=function(a){var b,t=this.C;if(t)for(b=[];t;t=t.C)b.push(t);t=this.J;var e=a.type||a;if("string"==typeof a)a=new at(a,t);else if(a instanceof at)a.target=a.target||t;else{var n=a;G(a=new at(e,t),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var o=a.a=b[r];n=Dt(o,e,!0,a)&&n}if(n=Dt(o=a.a=t,e,!0,a)&&n,n=Dt(o,e,!1,a)&&n,b)for(r=0;r<b.length;r++)n=Dt(o=a.a=b[r],e,!1,a)&&n;return n},g.G=function(){if(Rt.S.G.call(this),this.c){var t,a=this.c;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)vt(e[n]);delete a.a[t],a.b--}}this.C=null},g.va=function(a,b,t,e){return this.c.add(String(a),b,!1,t,e)},g.wa=function(a,b,t,e){return this.c.add(String(a),b,!0,t,e)};var Pt=f.JSON.stringify;function Ot(){this.b=this.a=null}var Vt,Ct=new(function(){function t(a,b,t){this.f=t,this.c=a,this.g=b,this.b=0,this.a=null}return t.prototype.get=function(){var a;return 0<this.b?(this.b--,a=this.a,this.a=a.next,a.next=null):a=this.c(),a},t}())((function(){return new Mt}),(function(a){a.reset()}),100);function Ut(){var a=Ft,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function Mt(){this.next=this.b=this.a=null}function xt(a){f.setTimeout((function(){throw a}),0)}function Gt(a,b){Vt||function(){var a=f.Promise.resolve(void 0);Vt=function(){a.then(qt)}}(),jt||(Vt(),jt=!0),Ft.add(a,b)}Ot.prototype.add=function(a,b){var t=Ct.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},Mt.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},Mt.prototype.reset=function(){this.next=this.b=this.a=null};var jt=!1,Ft=new Ot;function qt(){for(var a;a=Ut();){try{a.a.call(a.b)}catch(t){xt(t)}var b=Ct;b.g(a),b.b<b.f&&(b.b++,a.next=b.a,b.a=a)}jt=!1}function Bt(a,b){Rt.call(this),this.b=a||1,this.a=b||f,this.f=p(this.Ya,this),this.g=q()}function Qt(a){a.aa=!1,a.M&&(a.a.clearTimeout(a.M),a.M=null)}function zt(a,b,t){if("function"==d(a))t&&(a=p(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=p(a.handleEvent,a)}return 2147483647<Number(b)?-1:f.setTimeout(a,b||0)}function Wt(a){a.a=zt((function(){a.a=null,a.c&&(a.c=!1,Wt(a))}),a.h);var b=a.b;a.b=null,a.g.apply(null,b)}T(Bt,Rt),(g=Bt.prototype).aa=!1,g.M=null,g.Ya=function(){if(this.aa){var a=q()-this.g;0<a&&a<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-a):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Qt(this),this.start()))}},g.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=q())},g.G=function(){Bt.S.G.call(this),Qt(this),delete this.a};var Kt=function(t){function e(a,b,e){var n=t.call(this)||this;return n.g=null!=e?a.bind(e):a,n.h=b,n.b=null,n.c=!1,n.a=null,n}return function(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}(e,t),e.prototype.f=function(a){this.b=arguments,this.a?this.c=!0:Wt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(f.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(u);function Ht(a){u.call(this),this.b=a,this.a={}}T(Ht,u);var Xt=[];function Yt(a,b,t,e){Array.isArray(t)||(t&&(Xt[0]=t.toString()),t=Xt);for(var n=0;n<t.length;n++){var r=Et(b,t[n],e||a.handleEvent,!1,a.b||a);if(!r)break;a.a[r.key]=r}}function Jt(a){U(a.a,(function(b,t){this.a.hasOwnProperty(t)&&It(b)}),a),a.a={}}function Zt(){this.a=!0}function $t(a,b,t,e){a.info((function(){return"XMLHTTP TEXT ("+b+"): "+function(a,b){if(!a.a)return b;if(!b)return null;try{var t=JSON.parse(b);if(t)for(a=0;a<t.length;a++)if(Array.isArray(t[a])){var e=t[a];if(!(2>e.length)){var n=e[1];if(Array.isArray(n)&&!(1>n.length)){var r=n[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<n.length;o++)n[o]=""}}}return Pt(t)}catch(t){return b}}(a,t)+(e?" "+e:"")}))}Ht.prototype.G=function(){Ht.S.G.call(this),Jt(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zt.prototype.info=function(){};var te=null;function ee(){return te=te||new Rt}function ne(a){at.call(this,"serverreachability",a)}function re(a){var b=ee();b.dispatchEvent(new ne(b,a))}function ie(a){at.call(this,"statevent",a)}function oe(a){var b=ee();b.dispatchEvent(new ie(b,a))}function se(a){at.call(this,"timingevent",a)}function ue(a,b){if("function"!=d(a))throw Error("Fn must not be null and must be a function");return f.setTimeout((function(){a()}),b)}T(ne,at),T(ie,at),T(se,at);var ae={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},ce={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function he(){}function fe(a){var b;return(b=a.a)||(b=a.a={}),b}function le(){}he.prototype.a=null;var pe,de={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function ve(){at.call(this,"d")}function ye(){at.call(this,"c")}function ge(){}function me(a,b,t,e){this.g=a,this.c=b,this.f=t,this.T=e||1,this.J=new Ht(this),this.P=we,a=W?125:void 0,this.R=new Bt(a),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}T(ve,at),T(ye,at),T(ge,he),pe=new ge;var we=45e3,be={},Ee={};function _e(a,b,t){a.H=1,a.i=Qe(xe(b)),a.j=t,a.I=!0,Ie(a,null)}function Ie(a,b){a.u=q(),Ne(a),a.l=xe(a.i);var t=a.l,e=a.T;Array.isArray(e)||(e=[String(e)]),nn(t.b,"t",e),a.D=0,a.a=Yn(a.g,a.g.C?b:null),0<a.O&&(a.F=new Kt(p(a.Ca,a,a.a),a.O)),Yt(a.J,a.a,"readystatechange",a.Wa),b=a.B?M(a.B):{},a.j?(a.m||(a.m="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.a.ba(a.l,a.m,a.j,b)):(a.m="GET",a.a.ba(a.l,a.m,null,b)),re(1),function(a,b,t,e,n,r){a.info((function(){if(a.a)if(r)for(var o="",c=r.split("&"),h=0;h<c.length;h++){var f=c[h].split("=");if(1<f.length){var l=f[0];f=f[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+f+"&":o+(l+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+e+") [attempt "+n+"]: "+b+"\n"+t+"\n"+o}))}(a.c,a.m,a.l,a.f,a.T,a.j)}function Te(a,b,t){for(var e=!0;!a.A&&a.D<t.length;){var n=Ae(a,t);if(n==Ee){4==b&&(a.h=4,oe(14),e=!1),$t(a.c,a.f,null,"[Incomplete Response]");break}if(n==be){a.h=4,oe(15),$t(a.c,a.f,t,"[Invalid Chunk]"),e=!1;break}$t(a.c,a.f,n,null),De(a,n)}4==b&&0==t.length&&(a.h=1,oe(16),e=!1),a.b=a.b&&e,e?0<t.length&&!a.W&&(a.W=!0,(b=a.g).a==a&&b.V&&!b.F&&(b.c.info("Great, no buffering proxy detected. Bytes received: "+t.length),qn(b),b.F=!0)):($t(a.c,a.f,t,"[Invalid Chunked Response]"),Re(a),Se(a))}function Ae(a,b){var t=a.D,e=b.indexOf("\n",t);return-1==e?Ee:(t=Number(b.substring(t,e)),isNaN(t)?be:(e+=1)+t>b.length?Ee:(b=b.substr(e,t),a.D=e+t,b))}function Ne(a){a.U=q()+a.P,Le(a,a.P)}function Le(a,b){if(null!=a.o)throw Error("WatchDog timer not null");a.o=ue(p(a.Ua,a),b)}function ke(a){a.o&&(f.clearTimeout(a.o),a.o=null)}function Se(a){0==a.g.v||a.A||zn(a.g,a)}function Re(a){ke(a);var b=a.F;b&&"function"==typeof b.ja&&b.ja(),a.F=null,Qt(a.R),Jt(a.J),a.a&&(b=a.a,a.a=null,b.abort(),b.ja())}function De(a,b){try{var t=a.g;if(0!=t.v&&(t.a==a||hn(t.b,a)))if(t.I=a.N,!a.C&&hn(t.b,a)&&3==t.v){try{var e=t.ka.a.parse(b)}catch(t){e=null}if(Array.isArray(e)&&3==e.length){var n=e;if(0==n[0]){t:if(!t.j){if(t.a){if(!(t.a.u+3e3<a.u))break t;Qn(t),On(t)}Fn(t),oe(18)}}else t.oa=n[1],0<t.oa-t.P&&37500>n[2]&&t.H&&0==t.o&&!t.m&&(t.m=ue(p(t.Ra,t),6e3));if(1>=cn(t.b)&&t.ea){try{t.ea()}catch(t){}t.ea=void 0}}else Kn(t,11)}else if((a.C||t.a==a)&&Qn(t),!S(b))for(b=e=t.ka.a.parse(b),e=0;e<b.length;e++)if(n=b[e],t.P=n[0],n=n[1],2==t.v)if("c"==n[0]){t.J=n[1],t.ga=n[2];var r=n[3];null!=r&&(t.ha=r,t.c.info("VER="+t.ha));var o=n[4];null!=o&&(t.pa=o,t.c.info("SVER="+t.pa));var c=n[5];if(null!=c&&"number"==typeof c&&0<c){var h=1.5*c;t.D=h,t.c.info("backChannelRequestTimeoutMs_="+h)}h=t;var f=a.a;if(f){var l=f.a?f.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var d=h.b;!d.a&&(P(l,"spdy")||P(l,"quic")||P(l,"h2"))&&(d.f=d.g,d.a=new Set,d.b&&(fn(d,d.b),d.b=null))}if(h.A){var v=f.a?f.a.getResponseHeader("X-HTTP-Session-Id"):null;v&&(h.na=v,Be(h.B,h.A,v))}}t.v=3,t.f&&t.f.ta(),t.V&&(t.N=q()-a.u,t.c.info("Handshake RTT: "+t.N+"ms"));var y=a;if((h=t).la=Xn(h,h.C?h.ga:null,h.fa),y.C){ln(h.b,y);var m=y,w=h.D;w&&m.setTimeout(w),m.o&&(ke(m),Ne(m)),h.a=y}else jn(h);0<t.g.length&&Un(t)}else"stop"!=n[0]&&"close"!=n[0]||Kn(t,7);else 3==t.v&&("stop"==n[0]||"close"==n[0]?"stop"==n[0]?Kn(t,7):Pn(t):"noop"!=n[0]&&t.f&&t.f.sa(n),t.o=0);re(4)}catch(t){}}function Pe(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(v(a)||"string"==typeof a)N(a,b,void 0);else{if(a.L&&"function"==typeof a.L)var t=a.L();else if(a.K&&"function"==typeof a.K)t=void 0;else if(v(a)||"string"==typeof a){t=[];for(var e=a.length,n=0;n<e;n++)t.push(n)}else for(n in t=[],e=0,a)t[e++]=n;n=(e=function(a){if(a.K&&"function"==typeof a.K)return a.K();if("string"==typeof a)return a.split("");if(v(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}(a)).length;for(var r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}}function Oe(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof Oe)for(t=a.L(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function Ve(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];Ce(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)Ce(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function Ce(a,b){return Object.prototype.hasOwnProperty.call(a,b)}(g=me.prototype).setTimeout=function(a){this.P=a},g.Wa=function(a){a=a.target;var b=this.F;b&&3==kn(a)?b.f():this.Ca(a)},g.Ca=function(a){try{if(a==this.a)t:{var b=kn(this.a),t=this.a.ua(),e=this.a.X();if(!(3>b||3==b&&!W&&!this.a.$())){this.A||4!=b||7==t||re(8==t||0>=e?3:2),ke(this);var n=this.a.X();this.N=n;var r=this.a.$();if(this.b=200==n,function(a,b,t,e,n,r,o){a.info((function(){return"XMLHTTP RESP ("+e+") [ attempt "+n+"]: "+b+"\n"+t+"\n"+r+" "+o}))}(this.c,this.m,this.l,this.f,this.T,b,n),this.b){if(this.V&&!this.C){e:{if(this.a){var o,c=this.a;if((o=c.a?c.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(o)){var h=o;break e}}h=null}if(!h){this.b=!1,this.h=3,oe(12),Re(this),Se(this);break t}$t(this.c,this.f,h,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,De(this,h)}this.I?(Te(this,b,r),W&&this.b&&3==b&&(Yt(this.J,this.R,"tick",this.Va),this.R.start())):($t(this.c,this.f,r,null),De(this,r)),4==b&&Re(this),this.b&&!this.A&&(4==b?zn(this.g,this):(this.b=!1,Ne(this)))}else 400==n&&0<r.indexOf("Unknown SID")?(this.h=3,oe(12)):(this.h=0,oe(13)),Re(this),Se(this)}}}catch(t){}},g.Va=function(){if(this.a){var a=kn(this.a),b=this.a.$();this.D<b.length&&(ke(this),Te(this,a,b),this.b&&4!=a&&Ne(this))}},g.cancel=function(){this.A=!0,Re(this)},g.Ua=function(){this.o=null;var a=q();0<=a-this.U?(function(a,b){a.info((function(){return"TIMEOUT: "+b}))}(this.c,this.l),2!=this.H&&(re(3),oe(17)),Re(this),this.h=2,Se(this)):Le(this,this.U-a)},(g=Oe.prototype).K=function(){Ve(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},g.L=function(){return Ve(this),this.a.concat()},g.get=function(a,b){return Ce(this.b,a)?this.b[a]:b},g.set=function(a,b){Ce(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},g.forEach=function(a,b){for(var t=this.L(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var Ue=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Me(a,b){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,a instanceof Me){this.a=void 0!==b?b:a.a,Ge(this,a.f),this.j=a.j,je(this,a.c),Fe(this,a.h),this.g=a.g,b=a.b;var t=new $e;t.c=b.c,b.a&&(t.a=new Oe(b.a),t.b=b.b),qe(this,t),this.i=a.i}else a&&(t=String(a).match(Ue))?(this.a=!!b,Ge(this,t[1]||"",!0),this.j=ze(t[2]||""),je(this,t[3]||"",!0),Fe(this,t[4]),this.g=ze(t[5]||"",!0),qe(this,t[6]||"",!0),this.i=ze(t[7]||"")):(this.a=!!b,this.b=new $e(null,this.a))}function xe(a){return new Me(a)}function Ge(a,b,t){a.f=t?ze(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function je(a,b,t){a.c=t?ze(b,!0):b}function Fe(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.h=b}else a.h=null}function qe(a,b,t){b instanceof $e?(a.b=b,function(a,b){b&&!a.f&&(tn(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(dd(this,e),nn(this,n,t))}),a)),a.f=b}(a.b,a.a)):(t||(b=We(b,Je)),a.b=new $e(b,a.a))}function Be(a,b,t){a.b.set(b,t)}function Qe(a){return Be(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^q()).toString(36)),a}function ze(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function We(a,b,t){return"string"==typeof a?(a=encodeURI(a).replace(b,Ke),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ke(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Me.prototype.toString=function(){var a=[],b=this.f;b&&a.push(We(b,He,!0),":");var t=this.c;return(t||"file"==b)&&(a.push("//"),(b=this.j)&&a.push(We(b,He,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.h)&&a.push(":",String(t))),(t=this.g)&&(this.c&&"/"!=t.charAt(0)&&a.push("/"),a.push(We(t,"/"==t.charAt(0)?Ye:Xe,!0))),(t=this.b.toString())&&a.push("?",t),(t=this.i)&&a.push("#",We(t,Ze)),a.join("")};var He=/[#\/\?@]/g,Xe=/[#\?:]/g,Ye=/[#\?]/g,Je=/[#\?@]/g,Ze=/#/g;function $e(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function tn(a){a.a||(a.a=new Oe,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function dd(a,b){tn(a),b=rn(a,b),Ce(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Ce((a=a.a).b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Ve(a)))}function en(a,b){return tn(a),b=rn(a,b),Ce(a.a.b,b)}function nn(a,b,t){dd(a,b),0<t.length&&(a.c=null,a.a.set(rn(a,b),k(t)),a.b+=t.length)}function rn(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function on(a,b){this.b=a,this.a=b}function sn(a){this.g=a||un,f.PerformanceNavigationTiming?a=0<(a=f.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(f.ia&&f.ia.ya&&f.ia.ya()&&f.ia.ya().qb),this.f=a?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(g=$e.prototype).add=function(a,b){tn(this),this.c=null,a=rn(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},g.forEach=function(a,b){tn(this),this.a.forEach((function(t,e){N(t,(function(t){a.call(b,t,e,this)}),this)}),this)},g.L=function(){tn(this);for(var a=this.a.K(),b=this.a.L(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},g.K=function(a){tn(this);var b=[];if("string"==typeof a)en(this,a)&&(b=L(b,this.a.get(rn(this,a))));else{a=this.a.K();for(var t=0;t<a.length;t++)b=L(b,a[t])}return b},g.set=function(a,b){return tn(this),this.c=null,en(this,a=rn(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},g.get=function(a,b){return a&&0<(a=this.K(a)).length?String(a[0]):b},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.L(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.K(e);for(var r=0;r<e.length;r++){var o=n;""!==e[r]&&(o+="="+encodeURIComponent(String(e[r]))),a.push(o)}}return this.c=a.join("&")};var un=10;function an(a){return!!a.b||!!a.a&&a.a.size>=a.f}function cn(a){return a.b?1:a.a?a.a.size:0}function hn(a,b){return a.b?a.b==b:!!a.a&&a.a.has(b)}function fn(a,b){a.a?a.a.add(b):a.b=b}function ln(a,b){a.b&&a.b==b?a.b=null:a.a&&a.a.has(b)&&a.a.delete(b)}function pn(a){var t,e;if(null!=a.b)return a.c.concat(a.b.s);if(null!=a.a&&0!==a.a.size){var b=a.c;try{for(var n=o(a.a.values()),r=n.next();!r.done;r=n.next()){var c=r.value;b=b.concat(c.s)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return b}return k(a.c)}function dn(){}function vn(){this.a=new dn}function yn(a,b,t){var e=t||"";try{Pe(a,(function(t,n){var r=t;y(t)&&(r=Pt(t)),b.push(e+n+"="+encodeURIComponent(r))}))}catch(t){throw b.push(e+"type="+encodeURIComponent("_badmap")),t}}function gn(a,b,t,e,n){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,n(e)}catch(t){}}sn.prototype.cancel=function(){var t,e;if(this.c=pn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=o(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},dn.prototype.stringify=function(a){return f.JSON.stringify(a,void 0)},dn.prototype.parse=function(a){return f.JSON.parse(a,void 0)};var mn=f.JSON.parse;function wn(a){Rt.call(this),this.headers=new Oe,this.H=a||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=bn,this.D=this.F=!1}T(wn,Rt);var bn="",En=/^https?$/i,_n=["POST","PUT"];function In(a){return"content-type"==a.toLowerCase()}function td(a,b){a.b=!1,a.a&&(a.g=!0,a.a.abort(),a.g=!1),a.f=b,a.h=5,Tn(a),Nn(a)}function Tn(a){a.u||(a.u=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function An(a){if(a.b&&void 0!==h&&(!a.s[1]||4!=kn(a)||2!=a.X()))if(a.l&&4==kn(a))zt(a.za,0,a);else if(a.dispatchEvent("readystatechange"),4==kn(a)){a.b=!1;try{var t,b=a.X();t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}if(!(t=e)){var n;if(n=0===b){var r=String(a.B).match(Ue)[1]||null;if(!r&&f.self&&f.self.location){var o=f.self.location.protocol;r=o.substr(0,o.length-1)}n=!En.test(r?r.toLowerCase():"")}t=n}if(t)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.h=6;try{var c=2<kn(a)?a.a.statusText:""}catch(t){c=""}a.f=c+" ["+a.X()+"]",Tn(a)}}finally{Nn(a)}}}function Nn(a,b){if(a.a){Ln(a);var t=a.a,e=a.s[0]?l:null;a.a=null,a.s=null,b||a.dispatchEvent("ready");try{t.onreadystatechange=e}catch(t){}}}function Ln(a){a.a&&a.D&&(a.a.ontimeout=null),a.m&&(f.clearTimeout(a.m),a.m=null)}function kn(a){return a.a?a.a.readyState:0}function Sn(a,b,t){t:{for(e in t){var e=!1;break t}e=!0}e||(t=function(a){var b="";return U(a,(function(t,e){b+=e,b+=":",b+=t,b+="\r\n"})),b}(t),"string"==typeof a?null!=t&&encodeURIComponent(String(t)):Be(a,b,t))}function Rn(a,b,t){return t&&t.internalChannelParams&&t.internalChannelParams[a]||b}function Dn(a){this.pa=0,this.g=[],this.c=new Zt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Rn("failFast",!1,a),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Rn("baseRetryDelayMs",5e3,a),this.Ma=Rn("retryDelaySeedMs",1e4,a),this.Ja=Rn("forwardChannelMaxRetries",2,a),this.ma=Rn("forwardChannelRequestTimeoutMs",2e4,a),this.Ka=a&&a.g||void 0,this.D=void 0,this.C=a&&a.supportsCrossDomainXhr||!1,this.J="",this.b=new sn(a&&a.concurrentRequestLimit),this.ka=new vn,this.da=a&&a.fastHandshake||!1,this.Ga=a&&a.b||!1,a&&a.f&&(this.c.a=!1),a&&a.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&a&&a.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Pn(a){if(Vn(a),3==a.v){var b=a.R++,t=xe(a.B);Be(t,"SID",a.J),Be(t,"RID",b),Be(t,"TYPE","terminate"),xn(a,t),(b=new me(a,a.c,b,void 0)).H=2,b.i=Qe(xe(t)),t=!1,f.navigator&&f.navigator.sendBeacon&&(t=f.navigator.sendBeacon(b.i.toString(),"")),!t&&f.Image&&((new Image).src=b.i,t=!0),t||(b.a=Yn(b.g,null),b.a.ba(b.i)),b.u=q(),Ne(b)}Hn(a)}function On(a){a.a&&(qn(a),a.a.cancel(),a.a=null)}function Vn(a){On(a),a.j&&(f.clearTimeout(a.j),a.j=null),Qn(a),a.b.cancel(),a.h&&("number"==typeof a.h&&f.clearTimeout(a.h),a.h=null)}function Cn(a,b){a.g.push(new on(a.La++,b)),3==a.v&&Un(a)}function Un(a){an(a.b)||a.h||(a.h=!0,Gt(a.Ba,a),a.u=0)}function Mn(a,b){var t;t=b?b.f:a.R++;var e=xe(a.B);Be(e,"SID",a.J),Be(e,"RID",t),Be(e,"AID",a.P),xn(a,e),a.i&&a.l&&Sn(e,a.i,a.l),t=new me(a,a.c,t,a.u+1),null===a.i&&(t.B=a.l),b&&(a.g=b.s.concat(a.g)),b=Gn(a,t,1e3),t.setTimeout(Math.round(.5*a.ma)+Math.round(.5*a.ma*Math.random())),fn(a.b,t),_e(t,e,b)}function xn(a,b){a.f&&Pe({},(function(t,e){Be(b,e,t)}))}function Gn(a,b,t){t=Math.min(a.g.length,t);var e=a.f?p(a.f.Ha,a.f,a):null;t:for(var n=a.g,r=-1;;){var o=["count="+t];-1==r?0<t?(r=n[0].b,o.push("ofs="+r)):r=0:o.push("ofs="+r);for(var c=!0,h=0;h<t;h++){var f=n[h].b,l=n[h].a;if(0>(f-=r))r=Math.max(0,n[h].b-100),c=!1;else try{yn(l,o,"req"+f+"_")}catch(t){e&&e(l)}}if(c){e=o.join("&");break t}}return a=a.g.splice(0,t),b.s=a,e}function jn(a){a.a||a.j||(a.U=1,Gt(a.Aa,a),a.o=0)}function Fn(a){return!(a.a||a.j||3<=a.o)&&(a.U++,a.j=ue(p(a.Aa,a),Wn(a,a.o)),a.o++,!0)}function qn(a){null!=a.s&&(f.clearTimeout(a.s),a.s=null)}function Bn(a){a.a=new me(a,a.c,"rpc",a.U),null===a.i&&(a.a.B=a.l),a.a.O=0;var b=xe(a.la);Be(b,"RID","rpc"),Be(b,"SID",a.J),Be(b,"CI",a.H?"0":"1"),Be(b,"AID",a.P),xn(a,b),Be(b,"TYPE","xmlhttp"),a.i&&a.l&&Sn(b,a.i,a.l),a.D&&a.a.setTimeout(a.D);var t=a.a;a=a.ga,t.H=1,t.i=Qe(xe(b)),t.j=null,t.I=!0,Ie(t,a)}function Qn(a){null!=a.m&&(f.clearTimeout(a.m),a.m=null)}function zn(a,b){var t=null;if(a.a==b){Qn(a),qn(a),a.a=null;var e=2}else{if(!hn(a.b,b))return;t=b.s,ln(a.b,b),e=1}if(a.I=b.N,0!=a.v)if(b.b)if(1==e){t=b.j?b.j.length:0,b=q()-b.u;var n=a.u;(e=ee()).dispatchEvent(new se(e,t,b,n)),Un(a)}else jn(a);else if(3==(n=b.h)||0==n&&0<a.I||!(1==e&&function(a,b){return!(cn(a.b)>=a.b.f-(a.h?1:0))&&(a.h?(a.g=b.s.concat(a.g),!0):!(1==a.v||2==a.v||a.u>=(a.Ia?0:a.Ja))&&(a.h=ue(p(a.Ba,a,b),Wn(a,a.u)),a.u++,!0))}(a,b)||2==e&&Fn(a)))switch(t&&0<t.length&&(b=a.b,b.c=b.c.concat(t)),n){case 1:Kn(a,5);break;case 4:Kn(a,10);break;case 3:Kn(a,6);break;default:Kn(a,2)}}function Wn(a,b){var t=a.Fa+Math.floor(Math.random()*a.Ma);return a.f||(t*=2),t*b}function Kn(a,b){if(a.c.info("Error code "+b),2==b){var t=null;a.f&&(t=null);var e=p(a.Xa,a);t||(t=new Me("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||Ge(t,"https"),Qe(t)),function(a,b){var t=new Zt;if(f.Image){var e=new Image;e.onload=I(gn,t,e,"TestLoadImage: loaded",!0,b),e.onerror=I(gn,t,e,"TestLoadImage: error",!1,b),e.onabort=I(gn,t,e,"TestLoadImage: abort",!1,b),e.ontimeout=I(gn,t,e,"TestLoadImage: timeout",!1,b),f.setTimeout((function(){e.ontimeout&&e.ontimeout()}),1e4),e.src=a}else b(!1)}(t.toString(),e)}else oe(2);a.v=0,a.f&&a.f.ra(b),Hn(a),Vn(a)}function Hn(a){a.v=0,a.I=-1,a.f&&(0==pn(a.b).length&&0==a.g.length||(a.b.c.length=0,k(a.g),a.g.length=0),a.f.qa())}function Xn(a,b,t){var e=function(a){return a instanceof Me?xe(a):new Me(a,void 0)}(t);if(""!=e.c)b&&je(e,b+"."+e.c),Fe(e,e.h);else{var n=f.location;e=function(a,b,t,e){var n=new Me(null,void 0);return a&&Ge(n,a),b&&je(n,b),t&&Fe(n,t),e&&(n.g=e),n}(n.protocol,b?b+"."+n.hostname:n.hostname,+n.port,t)}return a.W&&U(a.W,(function(t,n){Be(e,n,t)})),b=a.A,t=a.na,b&&t&&Be(e,b,t),Be(e,"VER",a.ha),xn(a,e),e}function Yn(a,b){if(b&&!a.C)throw Error("Can't create secondary domain capable XhrIo object.");return(b=new wn(a.Ka)).F=a.C,b}function Jn(){}function Zn(){if(Q&&!(10<=Number(it)))throw Error("Environmental error: no available transport.")}function $n(a,b){Rt.call(this),this.a=new Dn(b),this.l=a,this.b=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.a.l=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.a&&(a?a["X-WebChannel-Client-Profile"]=b.a:a={"X-WebChannel-Client-Profile":b.a}),this.a.O=a,(a=b&&b.httpHeadersOverwriteParam)&&!S(a)&&(this.a.i=a),this.h=b&&b.supportsCrossDomainXhr||!1,this.g=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!S(b)&&(this.a.A=b,null!==(a=this.b)&&b in a&&(b in(a=this.b)&&delete a[b])),this.f=new rr(this)}function er(a){ve.call(this);var b=a.__sm__;if(b){t:{for(var t in b){a=t;break t}a=void 0}(this.c=a)?(a=this.c,this.data=null!==b&&a in b?b[a]:void 0):this.data=b}else this.data=a}function nr(){ye.call(this),this.status=1}function rr(a){this.a=a}(g=wn.prototype).ba=function(a,b,t,e){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+a);b=b?b.toUpperCase():"GET",this.B=a,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?fe(this.H):fe(pe),this.a.onreadystatechange=p(this.za,this);try{this.A=!0,this.a.open(b,String(a),!0),this.A=!1}catch(t){return void td(this,t)}a=t||"";var n=new Oe(this.headers);e&&Pe(e,(function(t,e){n.set(e,t)})),e=function(a){t:{for(var b=In,t=a.length,e="string"==typeof a?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]}(n.L()),t=f.FormData&&a instanceof f.FormData,!(0<=A(_n,b))||e||t||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ln(this),0<this.o&&((this.D=function(a){return Q&&et(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=p(this.xa,this)):this.m=zt(this.xa,this.o,this)),this.l=!0,this.a.send(a),this.l=!1}catch(t){td(this,t)}},g.xa=function(){void 0!==h&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(a){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Nn(this))},g.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Nn(this,!0)),wn.S.G.call(this)},g.za=function(){this.j||(this.A||this.l||this.g?An(this):this.Ta())},g.Ta=function(){An(this)},g.X=function(){try{return 2<kn(this)?this.a.status:-1}catch(t){return-1}},g.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},g.Na=function(a){if(this.a){var b=this.a.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),mn(b)}},g.ua=function(){return this.h},g.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(g=Dn.prototype).ha=8,g.v=1,g.Ba=function(a){if(this.h)if(this.h=null,1==this.v){if(!a){this.R=Math.floor(1e5*Math.random()),a=this.R++;var t,b=new me(this,this.c,a,void 0),e=this.l;if(this.O&&(e?G(e=M(e),this.O):e=this.O),null===this.i&&(b.B=e),this.da)t:{for(var n=t=0;n<this.g.length;n++){var r=this.g[n];if(void 0===(r="__data__"in r.a&&"string"==typeof(r=r.a.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break t}if(4096===t||n===this.g.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Gn(this,b,t),Be(n=xe(this.B),"RID",a),Be(n,"CVER",22),this.A&&Be(n,"X-HTTP-Session-Id",this.A),xn(this,n),this.i&&e&&Sn(n,this.i,e),fn(this.b,b),this.Ga&&Be(n,"TYPE","init"),this.da?(Be(n,"$req",t),Be(n,"SID","null"),b.V=!0,_e(b,n,null)):_e(b,n,t),this.v=2}}else 3==this.v&&(a?Mn(this,a):0==this.g.length||an(this.b)||Mn(this))},g.Aa=function(){if(this.j=null,Bn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var a=2*this.N;this.c.info("BP detection timer enabled: "+a),this.s=ue(p(this.Sa,this),a)}},g.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,On(this),Bn(this))},g.Ra=function(){null!=this.m&&(this.m=null,On(this),Fn(this),oe(19))},g.Xa=function(a){a?(this.c.info("Successfully pinged google.com"),oe(2)):(this.c.info("Failed to ping google.com"),oe(1))},(g=Jn.prototype).ta=function(){},g.sa=function(){},g.ra=function(){},g.qa=function(){},g.Ha=function(){},Zn.prototype.a=function(a,b){return new $n(a,b)},T($n,Rt),(g=$n.prototype).addEventListener=function(a,b,t,e){$n.S.addEventListener.call(this,a,b,t,e)},g.removeEventListener=function(a,b,t,e){$n.S.removeEventListener.call(this,a,b,t,e)},g.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var a=this.a,b=this.l,t=this.b||void 0;oe(0),a.fa=b,a.W=t||{},a.H=a.T,a.B=Xn(a,null,a.fa),Un(a)},g.close=function(){Pn(this.a)},g.Pa=function(a){if("string"==typeof a){var b={};b.__data__=a,Cn(this.a,b)}else this.g?((b={}).__data__=Pt(a),Cn(this.a,b)):Cn(this.a,a)},g.G=function(){this.a.f=null,delete this.f,Pn(this.a),delete this.a,$n.S.G.call(this)},T(er,ve),T(nr,ye),T(rr,Jn),rr.prototype.ta=function(){this.a.dispatchEvent("a")},rr.prototype.sa=function(a){this.a.dispatchEvent(new er(a))},rr.prototype.ra=function(a){this.a.dispatchEvent(new nr(a))},rr.prototype.qa=function(){this.a.dispatchEvent("b")},Zn.prototype.createWebChannel=Zn.prototype.a,$n.prototype.send=$n.prototype.Pa,$n.prototype.open=$n.prototype.Oa,$n.prototype.close=$n.prototype.close,ae.NO_ERROR=0,ae.TIMEOUT=8,ae.HTTP_ERROR=6,ce.COMPLETE="complete",le.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",Rt.prototype.listen=Rt.prototype.va,wn.prototype.listenOnce=wn.prototype.wa,wn.prototype.getLastError=wn.prototype.Qa,wn.prototype.getLastErrorCode=wn.prototype.ua,wn.prototype.getStatus=wn.prototype.X,wn.prototype.getResponseJson=wn.prototype.Na,wn.prototype.getResponseText=wn.prototype.$,wn.prototype.send=wn.prototype.ba;var ir={createWebChannelTransport:function(){return new Zn},ErrorCode:ae,EventType:ce,WebChannel:le,XhrIo:wn},or=ir.createWebChannelTransport,sr=ir.ErrorCode,ur=ir.EventType,ar=ir.WebChannel,cr=ir.XhrIo;e.default=ir}.call(this,n(67))},559:function(t,e,n){"use strict";n.r(e);n(542)}}]);